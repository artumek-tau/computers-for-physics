
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>שבוע 4 - לולאות &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/rtl.css?v=dc79e408" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '4_week';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="שבוע 5 - השמות ופונקציות חלק ב" href="5_week.html" />
    <link rel="prev" title="שבוע 3 - רשימות וטווחים" href="3_week.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/tau.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/tau.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    ברוכים הבאים לקורס מחשבים לפיסיקאים
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0_intro.html">מנהלות</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_week.html">שבוע 1 - היכרות עם פייתון ומחברות ג’ופיטר</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_week.html">שבוע 2 - פונקציות ותנאים</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_week.html">שבוע 3 - רשימות וטווחים</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">שבוע 4 - לולאות</a></li>



<li class="toctree-l1"><a class="reference internal" href="5_week.html">שבוע 5 - השמות ופונקציות חלק ב</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_week.html">שבוע 6 - מבני נתונים וקבצים</a></li>


<li class="toctree-l1"><a class="reference internal" href="7_week.html">שבוע 7 - Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_week.html">שבוע 8 - Matplotlib, Probabilities &amp; Histograms</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_week.html">שבוע 9 - Numpy מתקדם</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_week.html">שבוע 10 - SciPy</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/TauInnov/computers-for-physics/master?urlpath=lab/tree/4_week.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/TauInnov/computers-for-physics/blob/master/4_week.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/TauInnov/computers-for-physics" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/TauInnov/computers-for-physics/issues/new?title=Issue%20on%20page%20%2F4_week.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/4_week.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>שבוע 4 - לולאות</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">שבוע 4 - לולאות</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#for">לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">תחביר</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterable">מעבר על כל איברי iterable (רשימה, מחרוזת וכו’)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">תרגול</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterables">אובייקטים איטרביליים (iterables)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">מהם אובייקטים איטרביליים (iterables)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-range">לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> על <code class="docutils literal notranslate"><span class="pre">range</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">חישוב סכום של טווח מספרים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#range">עוד על <code class="docutils literal notranslate"><span class="pre">range</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">סיכום</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> וכמתים לוגיים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">סיכום לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#while">לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indentation">ההזחה (indentation) קובעת את גוף האיטרציה</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">תרגול</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">לולאות אינסופיות – ראו הוזהרתם!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">דוגמה לשימוש בלולאת while – הטלת קוביה</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">תרגול</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">הנחיות:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-while">סיכום ביניים – לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> לעומת לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">פתרון בעיות באמצעות לולאות</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">זיהוי פולינדרום</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">מציאת הגורם הראשוני המינימלי - תרגול פייתון</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">יעילות האלגוריתם למציאת הגורם הראשוני המינימלי</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">סיכום פתרון בעיות פולינדום ומציאת מספרים ראשוניים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">לולאות מקוננות</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">תרגול</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-while-n">דוגמה מסכמת להבדל במימושים בין <code class="docutils literal notranslate"><span class="pre">for</span></code> ו<code class="docutils literal notranslate"><span class="pre">while</span></code>: עצרת (n!)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">הגדרת עצרת:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">מימוש עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">עצרת עם <code class="docutils literal notranslate"><span class="pre">for</span></code> ו־פונקציה</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#break-continue"><code class="docutils literal notranslate"><span class="pre">break</span></code> ו <code class="docutils literal notranslate"><span class="pre">continue</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#break">מילת המפתח <code class="docutils literal notranslate"><span class="pre">break</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#break-for">דוגמה: שימוש ב־ <code class="docutils literal notranslate"><span class="pre">break</span></code> בלולאת <code class="docutils literal notranslate"><span class="pre">for</span></code> למציאת המחלק הראשוני הקטן ביותר</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continue">מילת המפתח <code class="docutils literal notranslate"><span class="pre">continue</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">דוגמה ל־ <code class="docutils literal notranslate"><span class="pre">continue</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">מבוא לסיבוכיות</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">כיצד מודדים את כמות הפעולות באלגוריתם?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">סיבוכיות ומדידת זמנים</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">סיכום מדידת זמנים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">בחנו את עצמכם</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>שבוע 4 - לולאות<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<p>בשיעור הזה נוסיף לארגז הכלים שלנו כלי חשוב מאוד – לולאות (loops). לולאות מאפשרות לנו להורות לפייתון להריץ מקטע קוד מסוים מספר פעמים (ולא פעם אחת בלבד כמו שראינו עד עכשיו).</p>
<p>בשיעור זה נציג את שני סוגי הלולאות הקיימים בפייתון – לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> ולולאות <code class="docutils literal notranslate"><span class="pre">while</span></code> - נתרגל את השימוש בהן ואפילו נפתור באמצעותן בעיות “מהעולם האמיתי”.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/KyOGXtnRg0M?si=jBNxht6KfkRhuozv" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p>בסרטון הבא, נבין את ההבדל בין שני סוגי הלולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> ו-<code class="docutils literal notranslate"><span class="pre">while</span></code> ומתי משתמשים בכל סוג
נתנסה בפייתון בשימוש בלולאות לפתרון בעיות
נלמד לזהות מצבים בהם לולאה לא תעצור
נפתור שתי בעיות מוכרות במדעי המחשב – זיהוי פלינדרום, וחישוב גורם ראשוני מינימלי של מספר
נבין את הקשר בין מספר האיטרציות לבין זמן הריצה של תוכנית
נלמד להבחין בין תוכניות בעלות זמן ריצה ליניארי וריבועי</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/l6xoRiJsq2k?si=goTJYDXHsSJ6i_S3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="rRbwlDjeIyDG" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#rRbwlDjeIyDG {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsrRbwlDjeIyDG=[{"question": "\u05dc\u05d0\u05d9\u05d6\u05d5 \u05de\u05d4\u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05d4\u05d1\u05d0\u05d5\u05ea \u05de\u05ea\u05d0\u05d9\u05dd \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05dc\u05d5\u05dc\u05d0\u05ea for?", "type": "many_choice", "answers": [{"answer": "\u05d4\u05e4\u05e2\u05dc\u05d4 \u05e9\u05dc \u05de\u05d2\u05d1 \u05dc\u05e0\u05d9\u05e7\u05d5\u05d9 \u05d7\u05dc\u05d5\u05df \u05d4\u05e8\u05db\u05d1 \u05e2\u05d3 \u05dc\u05de\u05e6\u05d1 \u05d1\u05d5 \u05d4\u05e9\u05de\u05e9\u05d4 \u05e0\u05e7\u05d9\u05d9\u05d4", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df. \u05de\u05d3\u05d5\u05d1\u05e8 \u05d1\u05ea\u05d4\u05dc\u05d9\u05da \u05e9\u05ea\u05dc\u05d5\u05d9 \u05d1\u05ea\u05e0\u05d0\u05d9 \u05d4\u05e4\u05e1\u05e7\u05d4 \u05d5\u05dc\u05d0 \u05d1\u05de\u05e1\u05e4\u05e8 \u05e7\u05d1\u05d5\u05e2 \u05e9\u05dc \u05d7\u05d6\u05e8\u05d5\u05ea."}, {"answer": "\u05d4\u05d5\u05e6\u05d0\u05ea \u05de\u05e0\u05d5\u05ea \u05de\u05d4\u05de\u05d8\u05d1\u05d7 \u05dc\u05de\u05e1\u05e2\u05d3\u05d4 \u05db\u05dc \u05e2\u05d5\u05d3 \u05d9\u05e9\u05e0\u05dd \u05e1\u05d5\u05e2\u05d3\u05d9\u05dd \u05e8\u05e2\u05d1\u05d9\u05dd \u05d1\u05de\u05e1\u05e2\u05d3\u05d4", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df. \u05de\u05e1\u05e4\u05e8 \u05d4\u05d7\u05d6\u05e8\u05d5\u05ea \u05d0\u05d9\u05e0\u05d5 \u05d9\u05d3\u05d5\u05e2 \u05de\u05e8\u05d0\u05e9 \u2013 \u05ea\u05dc\u05d5\u05d9 \u05d1\u05de\u05e6\u05d1 \u05de\u05e9\u05ea\u05e0\u05d4."}, {"answer": "\u05de\u05e2\u05d1\u05e8 \u05e2\u05dc \u05de\u05d9\u05dc\u05d9\u05dd \u05d1\u05de\u05e1\u05de\u05da \u05d8\u05e7\u05e1\u05d8 \u05dc\u05e6\u05d5\u05e8\u05da \u05de\u05e6\u05d9\u05d0\u05ea \u05d4\u05de\u05d9\u05dc\u05d4 \u05d4\u05e0\u05e4\u05d5\u05e6\u05d4 \u05d1\u05d9\u05d5\u05ea\u05e8", "correct": true, "feedback": " \u05e0\u05db\u05d5\u05df \u2013 \u05d6\u05d4 \u05de\u05ea\u05d0\u05d9\u05dd \u05d9\u05d5\u05ea\u05e8 \u05dc\u05dc\u05d5\u05dc\u05d0\u05ea for \u05d4\u05e2\u05d5\u05d1\u05e8\u05ea \u05e2\u05dc \u05e8\u05e9\u05d9\u05de\u05d4 \u05e1\u05d5\u05e4\u05d9\u05ea."}, {"answer": "\u05d7\u05d9\u05e9\u05d5\u05d1 \u05de\u05de\u05d5\u05e6\u05e2 \u05e6\u05d9\u05d5\u05e0\u05d9\u05dd \u05d1\u05e7\u05d5\u05e8\u05e1 \u05de\u05ea\u05d5\u05da \u05e8\u05e9\u05d9\u05de\u05ea \u05d4\u05e6\u05d9\u05d5\u05e0\u05d9\u05dd \u05e9\u05dc \u05d4\u05e1\u05d8\u05d5\u05d3\u05e0\u05d8\u05d9\u05dd", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df \u2013 \u05db\u05e9\u05d9\u05e9 \u05dc\u05da \u05e8\u05e9\u05d9\u05de\u05d4 \u05e0\u05ea\u05d5\u05e0\u05d4, \u05dc\u05d5\u05dc\u05d0\u05ea for \u05de\u05ea\u05d0\u05d9\u05de\u05d4 \u05d9\u05d5\u05ea\u05e8."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("rRbwlDjeIyDG")) {
    show_questions(questionsrRbwlDjeIyDG, rRbwlDjeIyDG);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="for">
<h1>לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code><a class="headerlink" href="#for" title="Link to this heading">#</a></h1>
<section id="id2">
<h2>תחביר<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="n">statement1</span>
    <span class="n">statement2</span>
    <span class="err">…</span>
<span class="n">rest</span> <span class="n">of</span> <span class="n">code</span><span class="err">…</span>
</pre></div>
</div>
</section>
<section id="iterable">
<h2>מעבר על כל איברי iterable (רשימה, מחרוזת וכו’)<a class="headerlink" href="#iterable" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>איטרציה 0: הקצה <code class="docutils literal notranslate"><span class="pre">element</span> <span class="pre">=</span> <span class="pre">iterable[0]</span></code><br />
בצע <code class="docutils literal notranslate"><span class="pre">statement1</span></code>, <code class="docutils literal notranslate"><span class="pre">statement2</span></code>, …</p></li>
<li><p>איטרציה 1: הקצה <code class="docutils literal notranslate"><span class="pre">element</span> <span class="pre">=</span> <span class="pre">iterable[1]</span></code><br />
בצע <code class="docutils literal notranslate"><span class="pre">statement1</span></code>, <code class="docutils literal notranslate"><span class="pre">statement2</span></code>, …
…</p></li>
<li><p>אין עוד איברים ברשימה - “קפוץ” לשאר הקוד (כלומר, לצאת מהלולאה)</p></li>
</ul>
</section>
<section id="id3">
<h2>תרגול<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>ממשו את הפונקציה count_char המופיעה בחלונית הקוד. הפונקציה מקבלת כקלט מחרוזת s ותו c. הפונקציה תעבור על תווי המחרוזת s, תספור כמה פעמים מופיע בה התו c, ותחזיר את מספר זה.</p>
<p>כפי שאתם ודאי שמים לב, התרגיל מאוד דומה לתרגיל הקודם. למעשה, זוהי הכללה של התרגיל הקודם - התרגיל הקודם עסק במקרה הפרטי, בו חיפשנו תו מסוים (רווח), בעוד כאן אנחנו רוצים שהפונקציה תדע לספור את מספר ההופעות של כל תו שתקבל כקלט. אם נריץ את הפונקציה כאשר c הוא רווח (כלומר, התו שאת מספר ההופעות שלו סופרים הוא רווח), נקבל פעולה זהה לזו של הפונקציה מהתרגיל הקודם.</p>
<p>הנחיות: ניתן להיעזר בקוד מהתרגיל הקודם (מימשנו עבורכם את הפתרון שלנו לתרגיל הקודם בחלונית הקוד הנוכחית).</p>
<p>לאחר שפתרתם את התרגיל, הריצו את הקוד וצפו בתוצאות בחלונית הפלט.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">count_spaces</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s2">&quot; &quot;</span><span class="p">:</span>
            <span class="n">cnt</span> <span class="o">=</span> <span class="n">cnt</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">cnt</span>


<span class="k">def</span><span class="w"> </span><span class="nf">count_char</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>

<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting spaces in &#39;Hello world!&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">count_char</span><span class="p">(</span><span class="s2">&quot;Hello world!&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, &#39;Hello world!&#39; has one space&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;Hello world!&#39; has one space but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting &#39;a&#39; in &#39;I hate bananas&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">count_char</span><span class="p">(</span><span class="s2">&quot;I hate bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, &#39;I hate bananas&#39; has 4 a&#39;s&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;I hate bananas&#39; has 4 a&#39;s but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting &#39;z&#39; in &#39;it&#39;s not here&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">count_char</span><span class="p">(</span><span class="s2">&quot;it&#39;s not here&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, &#39;it&#39;s not here&#39; has no z&#39;s&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;it&#39;s not here&#39; has no z&#39;s but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Counting spaces in &#39;Hello world!&#39;
WRONG: &#39;Hello world!&#39; has one space but the code returned None
********************
Counting &#39;a&#39; in &#39;I hate bananas&#39;
WRONG: &#39;I hate bananas&#39; has 4 a&#39;s but the code returned None
********************
Counting &#39;z&#39; in &#39;it&#39;s not here&#39;
WRONG: &#39;it&#39;s not here&#39; has no z&#39;s but the code returned None
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
</section>
<section id="iterables">
<h2>אובייקטים איטרביליים (iterables)<a class="headerlink" href="#iterables" title="Link to this heading">#</a></h2>
<section id="id4">
<h3>מהם אובייקטים איטרביליים (iterables)<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>אובייקטים איטרביליים הם מטיפוס המייצג <strong>סדרת ערכים</strong> ומאפשר ומאפשר <strong>מעבר עליהם בזה אחר זה</strong></p></li>
<li><p>אובייקטים אלו נמצאים בשימוש בתרחישים בהם הפעולה דורשת מעבר על כל אובייקט מתוך סדרת אובייקטים</p></li>
<li><p>ספציפית, לולאות for מבצעות מעבר על אובייקטים איטרביליים.</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="WvIQYlbSYFOh" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#WvIQYlbSYFOh {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsWvIQYlbSYFOh=[{"question": "\u05d0\u05d9\u05dc\u05d5 \u05de\u05d4\u05e1\u05d5\u05d2\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05d4\u05dd \u05d0\u05d9\u05d8\u05e8\u05d0\u05d1\u05d9\u05dc\u05d9\u05d9\u05dd (iterable)?", "type": "many_choice", "answers": [{"answer": "int", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "str", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "list", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "bool", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("WvIQYlbSYFOh")) {
    show_questions(questionsWvIQYlbSYFOh, WvIQYlbSYFOh);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
</section>
<section id="for-range">
<h2>לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> על <code class="docutils literal notranslate"><span class="pre">range</span></code><a class="headerlink" href="#for-range" title="Link to this heading">#</a></h2>
<p>ראינו כיצד לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> מאפשרות מעבר על איברי רשימה או תווי מחרוזת בזה אחר זה. לולאות for שימושיות מאוד גם כאשר רוצים לעבור על טווח (range) של מספרים שלמים, למשל על כל המספרים השלמים בין 1 ל-100. יש לזה הרבה שימושים שנפגוש במהלך הקורס. שימוש אחד מיידי שמייד נראה, הוא מעבר על אינדקסים של רשימה או מחרוזת.</p>
<p>הדוגמה שתלווה אותנו כאן היא הבעיה הבאה: אנחנו רוצים לחשב את סכום המספרים השלמים בין 1 לבין מיליון. חלקכם אולי יודעים שיש לזה נוסחה, וגם נציג אותה בהמשך, אבל כרגע “נשכח” ממנה כדי להדגים איך משתמשים בלולאות כדי לפתור את הבעיה.</p>
<section id="id5">
<h3>חישוב סכום של טווח מספרים<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>אילו רצינו לחשב את סכום המספרים השלמים בין 1 ל-10, זה לא היה דורש שימוש בלולאות בכלל. פשוט כותבים בפייתון:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">+</span><span class="mi">4</span><span class="o">+</span><span class="mi">5</span><span class="o">+</span><span class="mi">6</span><span class="o">+</span><span class="mi">7</span><span class="o">+</span><span class="mi">8</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>ומקבלים את התוצאה (55 אגב, למי שלא יכול לחכות…).</p>
<p>אבל לא סביר לפעול בגישה הזו לחישוב סכום המספרים בין 1 למיליון, שזה 10 בחזקת 6 (1 עם 6 אפסים אחריו, ובפייתון נזכיר שכותבים זאת 10**6 – ראיתם זאת בשיעור 1). זה אמנם אפשרי, תאורטית, אבל לא מעשי בכלל, אלא אם ממש משעמם לכם ואתם לעולם לא מתעייפים….</p>
<p>זה בדיוק הזמן להכיר טיפוס חדש בפייתון –<code class="docutils literal notranslate"><span class="pre">range</span></code>. הטיפוס <code class="docutils literal notranslate"><span class="pre">range</span></code> מאפשר להגדיר בקלות רבה טווח של מספרים. צריך לציין מהו המספר הראשון ומהו המספר האחרון, כלומר את טווח (range) המספרים, וזהו!</p>
<p>הטיפוס range שנלמד עליו כעת הוא סוג של iterable המכיל מספרים שלמים. בדומה לאובביקטים מטיפוסים <code class="docutils literal notranslate"><span class="pre">str</span></code> ו<code class="docutils literal notranslate"><span class="pre">list</span></code>, גם על <code class="docutils literal notranslate"><span class="pre">range</span></code> אפשר לעבור על איבריו באמצעות לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code>, בדיוק כפי שעשינו עם רשימות ומחרוזות.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="pjamjujSNxZA" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#pjamjujSNxZA {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionspjamjujSNxZA=[{"question": "\u05e2\u05e6\u05e8\u05d5 \u05d5\u05d7\u05e9\u05d1\u05d5: \u05d4\u05d0\u05dd \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 \u05d4\u05de\u05d5\u05d1\u05e0\u05d9\u05ea sum \u05e9\u05dc \u05e4\u05d9\u05d9\u05ea\u05d5\u05df \u05dc\u05d0 \u05de\u05e1\u05e4\u05d9\u05e7\u05d4 \u05db\u05d3\u05d9 \u05dc\u05e4\u05ea\u05d5\u05e8 \u05d0\u05ea \u05d1\u05e2\u05d9\u05ea \u05e1\u05db\u05d9\u05de\u05d4 \u05d4\u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05de\u05d0\u05d7\u05d3 \u05dc\u05de\u05dc\u05d9\u05d5\u05df \u05d1\u05e7\u05dc\u05d5\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05d4\u05e6\u05d2 \u05ea\u05e9\u05d5\u05d1\u05d4", "correct": true, "feedback": "\u05dc\u05d0. \u05d0\u05de\u05e0\u05dd \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 sum \u05e9\u05dc \u05e4\u05d9\u05d9\u05ea\u05d5\u05df \u05de\u05d0\u05e4\u05e9\u05e8\u05ea \u05dc\u05d7\u05e9\u05d1 \u05d1\u05e4\u05e7\u05d5\u05d3\u05d4 \u05d0\u05d7\u05ea \u05e1\u05db\u05d5\u05dd \u05e9\u05dc \u05e8\u05e9\u05d9\u05de\u05ea \u05de\u05e1\u05e4\u05e8\u05d9\u05dd, \u05d0\u05d1\u05dc \u05d0\u05d9\u05da \u05e0\u05d1\u05e0\u05d4 \u05e8\u05e9\u05d9\u05de\u05d4 \u05db\u05d6\u05d0\u05ea? \u05dc\u05db\u05ea\u05d5\u05d1 lst = [1, 2, 3, ..., 1000000] \u05d9\u05d4\u05d9\u05d4 \u05de\u05d0\u05d5\u05d3 \u05de\u05e1\u05d5\u05e8\u05d1\u05dc \u05d5\u05dc\u05d0 \u05d9\u05e2\u05d9\u05dc. \u05e4\u05ea\u05e8\u05d5\u05df \u05d8\u05d5\u05d1 \u05d9\u05d5\u05ea\u05e8 \u05d9\u05d4\u05d9\u05d4 \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1-iterables (\u05db\u05de\u05d5 range), \u05e9\u05de\u05d9\u05d9\u05e6\u05d2 \u05d0\u05ea \u05d4\u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05de\u05d1\u05dc\u05d9 \u05dc\u05db\u05ea\u05d5\u05d1 \u05d0\u05d5\u05ea\u05dd \u05d1\u05de\u05e4\u05d5\u05e8\u05e9 \u05d5\u05dc\u05e9\u05de\u05d5\u05e8 \u05d1\u05d6\u05db\u05e8\u05d5\u05df."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("pjamjujSNxZA")) {
    show_questions(questionspjamjujSNxZA, pjamjujSNxZA);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>כעת נדגים בקוד הבא שימוש ב<code class="docutils literal notranslate"><span class="pre">range</span></code> עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple for loop over range</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">):</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></div>
</div>
</div>
</div>
<p>רגע רגע… כפי שראיתם, המספרים שהודפסו הם כל המספרים השלמים בין 3 לבין… 16? לאן נעלם 17? התשובה היא שכאשר מגדירים טווח מספרים באמצעות range בפייתון, סוף הטווח, כלומר המספר השני שמציינים, לא כלול בטווח. זה קצת מבלבל, אבל פשוט צריך לזכור את זה. יש בזה משהו נוח, כפי שנראה בהמשך.</p>
<p>אז אילו רצינו להדפיס את כל המספרים השלמים בין 3 ל-17 היינו צריכים לרשום:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">18</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
<p>באופן כללי, range(a,b) בפייתון מגדיר את טווח המספרים השלמים בין a (כולל) ל-b (לא כולל).</p>
<p>“איזה מספר יודפס בסוף ריצת מקטע הקוד שלפניך?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span> 
    <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">*</span> <span class="n">num</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="APESYfeeFBDy" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#APESYfeeFBDy {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsAPESYfeeFBDy=[{"question": "", "type": "numeric", "answers": [{"type": "value", "value": 24, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1. \u05d8\u05d9\u05e4: \u05de\u05d3\u05d5\u05d1\u05e8 \u05d1\u05de\u05db\u05e4\u05dc\u05d4 \u05e9\u05dc \u05d4\u05de\u05e1\u05e4\u05e8\u05d9\u05dd 1 \u05e2\u05d3 4."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("APESYfeeFBDy")) {
    show_questions(questionsAPESYfeeFBDy, APESYfeeFBDy);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>מכאן הדרך קצרה לכתיבת תוכנית שמחשבת סכום של סדרת המספרים השלמים בין 1 ל-10**6. בפסאודו קוד זה ייראה כך:</p>
<p>חישוב הסכום 1+2+…+10**6:</p>
<ol class="arabic">
<li><p>הגדר משתנה סכום בשם s ואתחל אותו באפס</p></li>
<li><p>לכל מספר בטווח בין 1 לבין 10**6, נסמנו num:</p>
<p>2.1 הגדל את s ב-num</p>
</li>
<li><p>הדפס את s</p></li>
</ol>
<p>ובפייתון זה ייראה כך (הריצו ובידקו מהו הסכום המתקבל):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple for loop summing over range</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="n">num</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>500000500000
</pre></div>
</div>
</div>
</div>
<p>שימו לב שהטווח הוגדר ע”י <code class="docutils literal notranslate"><span class="pre">range(1,</span> <span class="pre">10*\*6+1)</span></code> כדי לכלול בו גם את 10**6.</p>
<p>התוכנית הזאת עובדת מצויין. אבל דמיינו שאתם כותבים תוכנית ארוכה, ובכמה מקומות בתוכנית שלכם צריך לחשב סכום של טווח מספרים, טווח אחר בכל פעם. במקום להעתיק את 4 השורות האלו בכל פעם ולשנות את הגדרת הטווח בהתאם, אפשר להגדיר פונקציה פעם אחת ולקרוא לה בכל פעם שצריך לחשב סכום של טווח. מכיוון שהטווח עלול להיות שונה בכל פעם, אפשר להגדיר שהפונקציה תקבל שני פרמטרים – תחילת הטווח וסוף הטווח, ותחשב את הסכום בהתאם. בפייתון זה ייראה כך:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sum_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>שתי הערות:</p>
<p>הגדרנו <code class="docutils literal notranslate"><span class="pre">range(start,</span> <span class="pre">end+1)</span></code> כדי לכלול את המספר end בטווח. ההנחה היא שמי שקורא לפונקציה לא צריך להכיר בכלל את <code class="docutils literal notranslate"><span class="pre">range</span></code> של פייתון, ובפרט לא צריך לטפל בעניין ש-range לא כוללת את המספר האחרון בטווח. הוא פשוט מעביר לפונקציה את הגבול התחתון והעליון של הטווח, והפונקציה מגדירה את <code class="docutils literal notranslate"><span class="pre">range</span></code> בהתאם. זו דרך יפה להסתיר מהמשתמש (מי שקורא לפונקציה) פרטי פייתון טכניים ולא חשובים.</p>
<p>הפונקציה מחזירה (return) את התוצאה, ולא מדפיסה אותה. מי שקרא לפונקציה בדרך כלל יעדיף שלא יהיו לה “תופעות לוואי” כמו הדפסות. אם הוא או היא רוצים להדפיס משהו, הם יעשו זאת בעצמם תוך שימוש בפלט של הפונקציה.</p>
<p>הריצו את הקוד הבא וצפו בתוצאה:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Executions of sum_range</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sum_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="n">res</span> <span class="o">=</span> <span class="n">sum_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The sum of all the integers between 1 and 1,000,000 is&#39;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;But the sum of all the integers between 3 and 3756 is&#39;</span><span class="p">,</span> <span class="n">sum_range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3756</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;And the sum of all the integers between -45 and 45 is&#39;</span><span class="p">,</span> <span class="n">sum_range</span><span class="p">(</span><span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The sum of all the integers between 1 and 1,000,000 is 500000500000
But the sum of all the integers between 3 and 3756 is 7055643
And the sum of all the integers between -45 and 45 is 0
</pre></div>
</div>
</div>
</div>
<p>אחרי שעברנו את כל הדרך לכתיבת פונקציה שמחשבת סכום של טווח מספרים, נחזור לרגע לפונקציה המובנית sum של פייתון. מסתבר, שאפשר להפעיל אותה לא רק על רשימת מספרים, אלא גם על טווח מספרים שמוגדר באמצעות range. במילים אחרות יכולנו להחליף את הלולאה שכתבנו קודם בפקודה אחת:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sum_range2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>אל תטעו – אין ארוחות חינם ואין פה שום קסם. הפונקציה sum עוברת, מאחורי הקלעים על איברי הטווח ועושה חישוב מאוד דומה לחישוב שעשינו קודם באמצעות לולאה. כפי שהזכרנו בשיעור הקודם, לרוב פונקציות מובנות של פייתון עושות עבודה טובה מאוד מבחינת יעילות וזמן ריצה. ובאמת, אפשר לראות הבדלים ניכרים בזמן הריצה של sum_range שכתבנו קודם ל- sum_range2 הזו. ההבדלים זניחים על טווח מספרים קטן, אבל ככל שהטווח גדול יותר ההבדלים נעשים בולטים ומשמעותיים יותר. הריצו למשל את הקוד בחלונית הבאה, שמודד זמני ריצה של חישוב הסכום של הטווח בין 1 ל- 10**8, כלומר מאה מיליון. אל תתעכבו על פרטי המימוש של מדידת הזמנים כרגע. נחזור לזה בהמשך השיעור. לאחר ההרצה שנו את הקריאה <code class="docutils literal notranslate"> <span class="pre">res</span> <span class="pre">=</span> <span class="pre">sum_range(1,</span> <span class="pre">10*\*8)</span></code> לקריאה <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">=</span> <span class="pre">sum_range2(1,</span> <span class="pre">10*\*8)</span></code> והריצו שוב.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time comparison for summing over range</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sum_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="k">def</span><span class="w"> </span><span class="nf">sum_range2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

<span class="n">tihs</span>
<span class="c1"># Time measurement. You can ignore the code below</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>

<span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sum_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">8</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The sum of 1+2+...+10**8 is&#39;</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="s1">&#39;and the time it took to compute it is&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">((</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">(),</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;seconds&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">12</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="k">def</span><span class="w"> </span><span class="nf">sum_range2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="ne">---&gt; </span><span class="mi">12</span> <span class="n">tihs</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> <span class="c1"># Time measurement. You can ignore the code below</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>

<span class="ne">NameError</span>: name &#39;tihs&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>לסיום, נזכיר למי שיודעים, ונכיר למי שלא, נוסחה פשוטה לחישוב סכום של סדרה מהצורה 1+2+…+n עבור n שלם חיובי כלשהו. את הנוסחה גילה המתמטיקאי הנודע פרידריך גאוס, ככל הנראה בהיותו בן 6 בלבד!
$<span class="math notranslate nohighlight">\(
1+2+3+⋯+n=n(n+1)2
\)</span>$</p>
<p>למשל, לפי נוסחה זו הסכום של המספרים השלמים בין 1 ל-10 הוא</p>
<div class="math notranslate nohighlight">
\[
1+2+3+⋯+10=10(10+1)2=10⋅112=55
\]</div>
<p>והסכום של <span class="math notranslate nohighlight">\( 1+2+...+10**8 \)</span> שווה לפי נוסחה זו ל- <span class="math notranslate nohighlight">\( 10∗∗8⋅(10∗∗8+1)2 \)</span>. חישוב כזה יעיל הרבה יותר מאשר שימוש בלולאה, ואפילו יותר מאשר שימוש בפונקציה המובנית <code class="docutils literal notranslate"><span class="pre">sum</span></code> של פייתון (שכאמור עושה בעצמה שימוש בלולאה). בפייתון זה ייראה כך:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">8</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
</pre></div>
</div>
<p>כדי להיווכח עד כמה חישוב זה יעיל יותר, החליפו את שורת הקריאה ל-sum_range בחלונית שלמעלה בשתי שורות אלו והריצו שוב.</p>
<p>אומנם התוצאה נראת דומה למדי לתוצאת ההרצה הקודמת, אבל למעשה מדובר במספר קטן הרבה יותר. רוב הסיכויים שתוצאת ההרצה תוצג כאשר בסופה האות e, אחריה מקף ואז מספר כמו 06. לדוגמה: 2.38102294921875e-06 <strong>המספר הזה הוא לא 2.38 שניות, אלא 2.38 מיליוניות השניה</strong>. בעצם הסיומת e-06 משמעותה שיש לכפול את המספר בעשר בחזקת מינוס 6, שזה 1 חלקי מיליון. מספר ממש קטן.</p>
<p>שימו לב שהשתמשנו כאן באופרטור החילוק // ולא באופרטור החילוק ה”רגיל” /. נזכיר שהאופרטור // חותך מהתוצאה את הספרות שאחרי הנקודה העשרונית, או במילים אחרות מעגל את התוצאה לשלם הקרוב מלמטה. מכיוון שהתוצאה שלנו היא ממילא מספר שלם, אין לכך השפעה על המספר, מלבד העובדה שהטיפוס המתקבל הוא <code class="docutils literal notranslate"><span class="pre">int</span></code> ולא <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
</section>
<section id="range">
<h3>עוד על <code class="docutils literal notranslate"><span class="pre">range</span></code><a class="headerlink" href="#range" title="Link to this heading">#</a></h3>
<p>לסיום ההסבר על <code class="docutils literal notranslate"><span class="pre">range</span></code>, נציין שטיפוס זה מאפשר גמישות רבה יחסית בהגדרת הטווח. למשל, אפשר להגדיר “קפיצה” ממספר למספר. בדוגמה שראינו קודם הקפיצה היתה של 1. התחלנו ב-3, עברנו ל-4 ואז ל-5 וכך הלאה. אבל אילו רשמנו למשל:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
<p>היינו מקבלים את המספרים 3, 5, 7, … וכך עד שמגיעים לסוף הטווח.</p>
<p>הריצו: שנו את המספר 2 למספר אחר, למשל 3 או 6 ובידקו את התוצאה.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple for loop over range with steps</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
5
7
9
11
13
15
</pre></div>
</div>
</div>
</div>
<p>הטיפוס <code class="docutils literal notranslate"><span class="pre">range</span></code> בפייתון מאפשר גם להגדיר סדרת מספרים יורדת, כלומר טווח שבו כל מספר קטן מקודמו. למשל:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple for loop over range with steps down</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
9
8
7
6
5
4
3
2
1
</pre></div>
</div>
</div>
</div>
<p>אגב, לא כל נסיון להגדיר טווח באמצעות range הוא חוקי. לדוגמה, שלושת הפרמטרים חייבים להיות מספרים שלמים. כמו כן, אי אפשר להגדיר קפיצה בגודל 0. טווח ריק לעומת זאת הוא חוקי לחלוטין. נסו להגדיר למשל את הטווח range(1, 10, -1) וצפו בתוצאה.</p>
<p>לפעמים כותבים range עם פרמטר יחיד בתוך הסוגריים. למשל range(100). הביטוי הזה שקול לביטוי range(0,100,1), כלומר: כאשר נותנים ל-range רק פרמטר אחד, ברירת המחדל היא שהטווח מתחיל ב-0, קופץ ב-1 כל פעם, והפרמטר היחיד מציין את סוף הטווח. range(100) אם כן הוא טווח המספרים בין 0 ל-99 בקפיצות של 1.</p>
<p>מכאן, שישנה דרך מאוד פשוטה בפייתון לומר “עשה 100 פעמים את הפעולה X”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
     <span class="n">Do</span> <span class="n">X</span>
</pre></div>
</div>
<p>ובאופן כללי, כדי לבצע פעולה מסויימת n פעמים:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
     <span class="n">Do</span> <span class="n">X</span>
</pre></div>
</div>
<p>בעצם עוברים פה על טווח המספרים 0,1,…,n-1, כלומר מבצעים בדיוק n איטרציות, ובכל אחת מהן מבצעים את הפעולה X. הפעולה X  יכולה להשתמש בערכו של i, אבל כמובן לא חייבת. למשל:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
     <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>לעומת:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3>סיכום<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>ראינו שאפשר להפעיל לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> על טיפוס חדש שהכרנו, <code class="docutils literal notranslate"><span class="pre">range</span></code>. טיפוס זה מאפשר להגדיר בקלות טווח מספרים, ובשילוב עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code> אפשר לעבור על המספרים בטווח בזה אחר זה. ראינו כמה דרכים להגדיר טווח מספרים באמצעות <code class="docutils literal notranslate"><span class="pre">range</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">range(b)</span></code> – טווח המספרים 0,1,2,…,b-1</p>
<p><code class="docutils literal notranslate"><span class="pre">range(a,b)</span></code> – טווח המספרים a,a+1,a+2,…,b-1.</p>
<p><code class="docutils literal notranslate"><span class="pre">range(a,b,c)</span></code> – טווח המספרים שמתחיל ב-a, קופץ ב-c כל פעם, עד המספר האחרון שעדיין קטן מ-b.</p>
<p>הדגמנו זאת באמצעות תוכנית בפייתון שמחשבת סכום של טווח מספרים כזה. עבור הדוגמה הזו, הסברנו שבעצם יש דרך מהירה ויעילה יותר לבצע את החישוב, באמצעות הנוסחה לסכום סדרה חשבונית. אבל כפי שכבר ראינו, לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> עם <code class="docutils literal notranslate"><span class="pre">range</span></code> מהוות דרך פשוטה לבצע פעולה מסויימת מספר ידוע מראש של פעמים. עוד נראה בהמשך דוגמאות נוספות לשימוש בלולאות כאלו.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/tTy4ZxSliJQ?si=sSHuhJmfaeOjDSd8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="HNJAmxWnXvmo" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#HNJAmxWnXvmo {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsHNJAmxWnXvmo=[{"question": "\u05de\u05d4 \u05d4\u05e2\u05e8\u05da \u05d4\u05e1\u05d5\u05e4\u05d9 \u05e9\u05dc x \u05dc\u05d0\u05d7\u05e8 \u05d1\u05d9\u05e6\u05d5\u05e2 \u05d4\u05e7\u05d5\u05d3? (x \u05de\u05ea\u05d7\u05d9\u05dc \u05de-0)", "type": "numeric", "answers": [{"type": "value", "value": 4, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4 \u05e8\u05e6\u05d4 4 \u05e4\u05e2\u05de\u05d9\u05dd, \u05d5\u05db\u05dc \u05e4\u05e2\u05dd num > 5."}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05dc\u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8\u05d9 \u05ea\u05e0\u05d0\u05d9 if num > 5."}]}, {"question": "\u05de\u05d4 \u05d4\u05e2\u05e8\u05da \u05d4\u05e1\u05d5\u05e4\u05d9 \u05e9\u05dc y \u05dc\u05d0\u05d7\u05e8 \u05d1\u05d9\u05e6\u05d5\u05e2 \u05d4\u05e7\u05d5\u05d3? (y \u05de\u05ea\u05d7\u05d9\u05dc \u05de-0)", "type": "numeric", "answers": [{"type": "value", "value": 0, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! num \u05dc\u05e2\u05d5\u05dc\u05dd \u05dc\u05d0 \u05e9\u05d5\u05d5\u05d4 \u05dc-3, \u05d5\u05dc\u05db\u05df \u05d4\u05ea\u05e0\u05d0\u05d9 \u05dc\u05d0 \u05de\u05ea\u05e7\u05d9\u05d9\u05dd."}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05dc\u05d1\u05d3\u05d5\u05e7 \u05d0\u05dd num == 3 \u05d0\u05d9 \u05e4\u05e2\u05dd \u05de\u05ea\u05e7\u05d9\u05d9\u05dd."}]}, {"question": "\u05de\u05d4 \u05d4\u05e2\u05e8\u05da \u05d4\u05e1\u05d5\u05e4\u05d9 \u05e9\u05dc z \u05dc\u05d0\u05d7\u05e8 \u05d1\u05d9\u05e6\u05d5\u05e2 \u05d4\u05e7\u05d5\u05d3? (z \u05de\u05ea\u05d7\u05d9\u05dc \u05de-0)", "type": "numeric", "answers": [{"type": "value", "value": 8, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d4\u05ea\u05e0\u05d0\u05d9 else \u05de\u05ea\u05d1\u05e6\u05e2 \u05db\u05dc \u05e4\u05e2\u05dd \u05d5\u05dc\u05db\u05df z += 2 \u05e8\u05e5 4 \u05e4\u05e2\u05de\u05d9\u05dd."}, {"type": "default", "feedback": "\u05d1\u05d3\u05d5\u05e7 \u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05de\u05ea\u05d1\u05e6\u05e2 else (\u05db\u05d0\u05e9\u05e8 num \u2260 3)."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("HNJAmxWnXvmo")) {
    show_questions(questionsHNJAmxWnXvmo, HNJAmxWnXvmo);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>לפניכם קטע קוד קצר:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="jYFoYpETJfcB" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#jYFoYpETJfcB {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsjYFoYpETJfcB=[{"question": "\u05db\u05de\u05d4 \u05d0\u05d9\u05d8\u05e8\u05e6\u05d9\u05d5\u05ea \u05ea\u05d1\u05e6\u05e2 \u05dc\u05d5\u05dc\u05d0\u05ea \u05d4-for \u05d1\u05e7\u05d5\u05d3 \u05dc\u05e2\u05d9\u05dc?", "type": "numeric", "answers": [{"type": "value", "value": 0, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! range(10, 20, -1) \u05dc\u05d0 \u05de\u05e4\u05d9\u05e7\u05d4 \u05d0\u05e3 \u05e2\u05e8\u05da \u05db\u05d9 \u05d4\u05db\u05d9\u05d5\u05d5\u05df \u05d4\u05e4\u05d5\u05da."}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05dc\u05d1\u05d3\u05d5\u05e7 \u05d0\u05dd \u05d4\u05db\u05d9\u05d5\u05d5\u05df \u05e9\u05dc \u05d4\u05d8\u05d5\u05d5\u05d7 (\u05de\u05d4-10 \u05e2\u05d3 20 \u05e2\u05dd \u05e6\u05e2\u05d3 \u05e9\u05dc\u05d9\u05dc\u05d9) \u05d0\u05e4\u05e9\u05e8\u05d9."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("jYFoYpETJfcB")) {
    show_questions(questionsjYFoYpETJfcB, jYFoYpETJfcB);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/tTy4ZxSliJQ?si=sSHuhJmfaeOjDSd8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p><strong>לנוחיותכם חלונית עם הקוד שראינו בסרטון. מוזמנים להריץ בעצמכם:</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe src="https://pythontutor.com/iframe-embed.html#code=grades_lst%20%3D%20%5B90,%20100,%2085,%2085,%2075,%2095%5D%0A%0A%23%20for%20grade%20in%20grades_lst%3A%0A%23%20%20%20%20%20print%28grade%29%0An%20%3D%20len%28grades_lst%29%0Afor%20i%20in%20range%28n%29%3A%0A%20%20%20%20print%28grades_lst%5Bi%5D%29&amp;codeDivHeight=400&amp;codeDivWidth=350&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" width="800" height="450" frameborder="0"> </iframe>
</div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="WfHdbuTXwvuD" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#WfHdbuTXwvuD {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsWfHdbuTXwvuD=[{"question": "\u05de\u05d4 \u05d4\u05de\u05e1\u05e4\u05e8 \u05d4\u05e8\u05d0\u05e9\u05d5\u05df \u05e9\u05de\u05d5\u05d3\u05e4\u05e1 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 what?", "type": "numeric", "answers": [{"type": "value", "value": 0, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d4\u05d0\u05d9\u05d1\u05e8 \u05d4\u05e8\u05d0\u05e9\u05d5\u05df (3) \u05d4\u05d5\u05d0 \u05d7\u05d9\u05d5\u05d1\u05d9 \u05d5\u05dc\u05db\u05df \u05d9\u05d5\u05d3\u05e4\u05e1 i=0."}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05dc\u05d1\u05d3\u05d5\u05e7 \u05de\u05d4\u05d5 \u05d4\u05e2\u05e8\u05da \u05d4\u05e8\u05d0\u05e9\u05d5\u05df \u05d4\u05d7\u05d9\u05d5\u05d1\u05d9 \u05d1\u05e8\u05e9\u05d9\u05de\u05d4."}]}, {"question": "\u05de\u05d4 \u05d4\u05de\u05e1\u05e4\u05e8 \u05d4\u05e9\u05e0\u05d9 \u05e9\u05de\u05d5\u05d3\u05e4\u05e1 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 what?", "type": "numeric", "answers": [{"type": "value", "value": 2, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d4\u05d0\u05d9\u05d1\u05e8 \u05d4\u05d7\u05d9\u05d5\u05d1\u05d9 \u05d4\u05d1\u05d0 \u05e0\u05de\u05e6\u05d0 \u05d1\u05d0\u05d9\u05e0\u05d3\u05e7\u05e1 2."}, {"type": "default", "feedback": "\u05e0\u05e1\u05d4 \u05dc\u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4 \u05d5\u05dc\u05d6\u05d4\u05d5\u05ea \u05de\u05ea\u05d9 lst[i] > 0."}]}, {"question": "\u05de\u05d4 \u05d4\u05de\u05e1\u05e4\u05e8 \u05d4\u05e9\u05dc\u05d9\u05e9\u05d9 \u05e9\u05de\u05d5\u05d3\u05e4\u05e1 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 what?", "type": "numeric", "answers": [{"type": "value", "value": 3, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d6\u05d4\u05d5 \u05d0\u05d9\u05e0\u05d3\u05e7\u05e1 \u05e0\u05d5\u05e1\u05e3 \u05e9\u05dc \u05e2\u05e8\u05da \u05d7\u05d9\u05d5\u05d1\u05d9 (6)."}, {"type": "default", "feedback": "\u05d1\u05d3\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e2\u05e8\u05db\u05d9\u05dd \u05d1\u05e8\u05e9\u05d9\u05de\u05d4 \u05dc\u05e4\u05d9 \u05d4\u05e1\u05d3\u05e8."}]}, {"question": "\u05de\u05d4 \u05d4\u05de\u05e1\u05e4\u05e8 \u05d4\u05e8\u05d1\u05d9\u05e2\u05d9 \u05e9\u05de\u05d5\u05d3\u05e4\u05e1 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 what?", "type": "numeric", "answers": [{"type": "value", "value": 6, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df! \u05d4\u05e2\u05e8\u05da \u05d4\u05d7\u05d9\u05d5\u05d1\u05d9 \u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05d4\u05d5\u05d0 \u05d1\u05d0\u05d9\u05e0\u05d3\u05e7\u05e1 6 (\u05d4\u05de\u05e1\u05e4\u05e8 1)."}, {"type": "default", "feedback": "\u05e2\u05d1\u05d5\u05e8 \u05db\u05dc \u05d0\u05d9\u05d1\u05e8 \u05d1\u05e8\u05e9\u05d9\u05de\u05d4, \u05d1\u05d3\u05d5\u05e7 \u05d4\u05d0\u05dd \u05d4\u05d5\u05d0 \u05d7\u05d9\u05d5\u05d1\u05d9 \u05d5\u05d4\u05d5\u05e1\u05e3 \u05d0\u05ea \u05d0\u05d9\u05e0\u05d3\u05e7\u05e1\u05d5."}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("WfHdbuTXwvuD")) {
    show_questions(questionsWfHdbuTXwvuD, WfHdbuTXwvuD);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>ממשו את הפונקציה <code class="docutils literal notranslate"><span class="pre">between(lst,a,b)</span></code> אשר מקבלת כפרמטרים רשימה של מספרים (lst) וטווח מספרים (הנתון על ידי קצותיו -a ו-b). הפונקציה תחזיר את מספר האיברים ברשימה lst אשר גדולים מ-a וקטנים מ-b.</p>
<p>להלן מספר דוגמאות הרצה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">between</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>	  
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">between</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">],</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>		  
<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span>
</pre></div>
</div>
<p>להלן מספר טיפים:</p>
<p>ודאו שהפונקציה בודקת האם המספרים גדולים/קטנים ממש מהטווח שהוגדר. לדוגמא: אם <code class="docutils literal notranslate"><span class="pre">a=10</span></code> ו-<code class="docutils literal notranslate"><span class="pre">b=20</span></code>, לא נספור איברים ברשימה ששווים ל-10 או 20 אלא רק איברים בטווח 11-19.</p>
<p>הריצו את הפונקציה על דוגמאות פשוטות וודאו שהתשובה המתקבלת נכונה. למשל, <code class="docutils literal notranslate"><span class="pre">between([1,2,3,4],0,5)</span></code> אמורה להחזיר 4.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">between</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>



<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting over [1, 2, 3, 4] with a = 0, b = 5&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">between</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, there are 4 elements between a = 0 and b = 5 in [1, 2, 3, 4]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: There are 4 elements between a = 0 and b = 5 in [1, 2, 3, 4] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting over [-5, 20, 13, 0] with a = 200, b = 300&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">between</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, there are no elements between a = 200 and b = 300 in [-5, 20, 13, 0]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: There are no elements between a = 200 and b = 300 in [-5, 20, 13, 0] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Counting over [-5, 20, 13, 0] with a = -10, b = 5&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">between</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, there are 2 elements between a = -10 and b = 5 in [-5, 20, 13, 0]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: There are 2 elements between a = -10 and b = 5 in [-5, 20, 13, 0] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Counting over [1, 2, 3, 4] with a = 0, b = 5
WRONG: There are 4 elements between a = 0 and b = 5 in [1, 2, 3, 4] but the code returned None
********************
Counting over [-5, 20, 13, 0] with a = 200, b = 300
WRONG: There are no elements between a = 200 and b = 300 in [-5, 20, 13, 0] but the code returned None
********************
Counting over [-5, 20, 13, 0] with a = -10, b = 5
WRONG: There are 2 elements between a = -10 and b = 5 in [-5, 20, 13, 0] but the code returned None
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
<p>בחלונית הקוד שלפניכם מוצגת הפונקציה הבאה, המחשבת ממוצע של מספרים ברשימת קלט L:</p>
<p>נסביר בקצרה את פעולת הפונקציה: הפונקציה מאתחלת משתנה בשם s ל-0, ולאחר מכן עוברת על איברי הרשימה באמצעות לולאת for ומוסיפה כל איבר ל-s, כך שבסופו של דבר s מחזיק את סכום איברי הרשימה. לבסוף, הפונקציה מחזירה את תוצאת החלוקה של s בגודל הרשימה ((len(L), כלומר, את הממוצע שלה.</p>
<p>כעת נרצה לכתוב את אותה פונקציה, אך עם לולאת for על range, כפי שראינו בסרטון האחרון. שנו את הקוד של הפונקציה המופיע בחלונית הקוד כך שהמעבר על איברי הרשימה יעשה עם לולאת for על range - כלומר, המעבר על איברי הרשימה יתבצע לפי אינדקסים - ומבלי לפגוע בפונקציונליות (כלומר, הפונקציה תעשה אותו דבר בדיוק).</p>
<p>לאחר שסיימתם, הריצו את הקוד ובדקו את תוצאות הבדיקות בחלונית הפלט.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this function so it uses for-range loops</span>

<span class="k">def</span><span class="w"> </span><span class="nf">avg</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
         <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>


<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing the average of [1, 2, 3, 4, 5]&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">avg</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mf">3.0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, the average of [1, 2, 3, 4, 5] is 3.0&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: The average of [1, 2, 3, 4, 5] is 3.0 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing the average of [10, 10, 10, 100]&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">avg</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mf">32.5</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, the average of [10, 10, 10, 100] is 32.5&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: The average of [10, 10, 10, 100] is 32.5 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Computing the average of [1, 2, 3, 4, 5]
CORRECT: Very good, the average of [1, 2, 3, 4, 5] is 3.0
********************
Computing the average of [10, 10, 10, 100]
CORRECT: Very good, the average of [10, 10, 10, 100] is 32.5
</pre></div>
</div>
</div>
</div>
<p>בתרגיל זה נכתוב פונקציה is_positive_int אשר מקבלת כקלט מחרוזת st ובודקת האם ללא הגרשיים המחרוזת היא בעצם מספר שלם וחיובי, כלומר:</p>
<ol class="arabic simple">
<li><p>המחרוזת אינה ריקה (כלומר, היא מכילה לפחות תו אחד)</p></li>
<li><p>התו הראשון במחרוזת הוא תו בטווח ‘1’-‘9’</p></li>
<li><p>מלבד התו הראשון, המחרוזת מכילה אך ורק תווים בטווח ‘0’-‘9’</p></li>
</ol>
<p>אם המחרוזת עונה על <strong>כל</strong> התנאים לעיל, נחזיר True, אחרת נחזיר False</p>
<p>להלן מספר דוגמאות הרצה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">is_positive_int</span><span class="p">(</span><span class="s2">&quot;123&quot;</span><span class="p">))</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_positive_int</span><span class="p">(</span><span class="s2">&quot;123.0&quot;</span><span class="p">))</span>		  
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_positive_int</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>		  
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span>

<span class="nb">print</span><span class="p">(</span><span class="n">is_positive_int</span><span class="p">(</span><span class="s2">&quot;99&quot;</span><span class="p">))</span>		  
<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_positive_int</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>

<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;101&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;101&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;101&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123.1&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123.1&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123.1&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123.1&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123.0&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123.0&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123.0&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123.0&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;0&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;0&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;0&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>    
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;943827658972346&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;943827658972346&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;943827658972346&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;943827658972346&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>    

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking &#39;123&#39;
WRONG: &#39;123&#39; is a positive int but the code returned None
********************
Checking &#39;101&#39;
WRONG: &#39;101&#39; is a positive int but the code returned None
********************
Checking &#39;123.1&#39;
WRONG: &#39;123.1&#39; is not a positive int but the code returned None
********************
Checking &#39;123.0&#39;
WRONG: &#39;123.0&#39; is not a positive int but the code returned None
********************
Checking &#39;0&#39;
WRONG: &#39;0&#39; is not a positive int but the code returned None
********************
Checking &#39;943827658972346&#39;
WRONG: &#39;943827658972346&#39; is a positive int but the code returned None
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3>לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> וכמתים לוגיים<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>הבעיה is_positive_int, שפגשתם בתרגיל הקודם, מעניקה לנו הזדמנות טובה לדון בתכנון של אלגוריתמים ובלוגיקה העומדת מאחורי הפתרון.</p>
<p>בואו נזכר מה היו התנאים שלנו לכך שמחרוזת מייצגת מספר שלם חיובי:</p>
<ol class="arabic simple">
<li><p>המחרוזת אינה ריקה (כלומר, היא מכילה לפחות תו אחד)</p></li>
<li><p>התו הראשון במחרוזת הוא תו בטווח ‘1’-‘9’</p></li>
<li><p>מלבד התו הראשון, המחרוזת מכילה אך ורק תווים בטווח ‘0’-‘9’
אם מחרוזת st מקיימת את כל שלושת התנאים הללו, נדע שהיא מייצגת מספר שלם חיובי.</p></li>
</ol>
<p><strong>להלן דוגמא לפתרון שגוי לבעיה שלנו, נסו לאתר את הבעיה:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_positive_int</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">st</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">st</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;123456789&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">st</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;0123456789&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;101&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;101&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;101&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123.1&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123.1&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123.1&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123.1&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;123.0&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;123.0&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;123.0&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;123.0&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;0&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;0&#39; is not a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;0&#39; is not a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>    
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;943827658972346&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_positive_int</span><span class="p">(</span><span class="s1">&#39;943827658972346&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;943827658972346&#39; is a positive int&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;943827658972346&#39; is a positive int but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>    

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking &#39;123&#39;
CORRECT: &#39;123&#39; is a positive int
********************
Checking &#39;101&#39;
CORRECT: &#39;101&#39; is a positive int
********************
Checking &#39;123.1&#39;
WRONG: &#39;123.1&#39; is not a positive int but the code returned True
********************
Checking &#39;123.0&#39;
WRONG: &#39;123.0&#39; is not a positive int but the code returned True
********************
Checking &#39;0&#39;
WRONG: &#39;0&#39; is not a positive int but the code returned True
********************
Checking &#39;943827658972346&#39;
CORRECT: &#39;943827658972346&#39; is a positive int
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h3>סיכום לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code><a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>ראינו עד כה שלושה סוגים של אוספים בפייתון:</p>
<p>מחרוזת (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – רצף תווים
רשימה (<code class="docutils literal notranslate"><span class="pre">list</span></code>) – רצף איברים כלשהם
טווח (<code class="docutils literal notranslate"><span class="pre">range</span></code>) – טווח מספרים שלמים בהפרשים קבועים
ראינו כי לולאות for משמשות אותנו למעבר סדרתי על איברי כל אלו באופן דומה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="s2">&quot;…&quot;</span><span class="p">:</span>
<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="err">…</span><span class="p">):</span>
<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="p">[</span><span class="err">…</span><span class="p">]:</span>
</pre></div>
</div>
<p>משתנה הלולאה, <code class="docutils literal notranslate"><span class="pre">var</span></code> במקרה הזה, עובר על איברי המחרוזת/רשימה/טווח בזה אחר זה מהראשון לאחרון.</p>
<p>בגוף הלולאה ייכתבו פקודות, שיכולות לעשות שימוש במשתנה var.</p>
<p>ביחידה הבאה נכיר את הסוג השני של לולאות בפייתון – לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code>. כל מה שאפשר לעשות עם לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> אפשר לעשות גם עם לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code>, אבל לא להיפך. יש מקרים בהם לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code> הן האופציה היחידה שלנו.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="while">
<h1>לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code><a class="headerlink" href="#while" title="Link to this heading">#</a></h1>
<p>ביחידות הקודמות ראינו כיצד משתמשים בלולאות for בפייתון. לולאות for משמשות לביצוע בלוק של פקודות <strong>מספר ידוע מראש של פעמים</strong>. ניתן להשתמש בלולאות for כדי לעבור בזה אחר זה על איברי רשימה, תווי מחרוזת או מספרים בטווח נתון.</p>
<p><strong>אבל מה קורה אם אנחנו לא יודעים מראש כמה פעמים צריך לחזור על ביצוע בלוק הפקודות?</strong> זה מקרה די נפוץ בתכנות. במקרה כזה אנחנו רוצים להגדיר תנאי מסויים, שלפיו ייקבע האם להמשיך לאיטרציה נוספת או להפסיק את ביצוע הלולאה. לולאות for לא מתאימות לסיטואציה כזאת.</p>
<p>בשביל זה יש סוג נוסף של לולאות בפייתון (ובשפות אחרות) – <strong>לולאות while</strong>. המבנה של לולאת while הוא כזה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">תנאי</span><span class="p">:</span>
 	<span class="n">בלוק</span> <span class="n">פקודות</span>
</pre></div>
</div>
<p>משמעות המבנה היא שבלוק הפקודות יתבצע כל עוד (while) התנאי שמוגדר בלולאה מתקיים. זה מהלך הביצוע המפורט: בפעם הראשונה שמגיעים לשורת ה-while בתוכנית שלנו, נבדק התנאי. אם התנאי מתקיים (ערכו True), בלוק הפקודות מתבצע, ומייד בסיומו חוזרים ובודקים שוב את התנאי. אם הוא שוב מתקיים, חוזרים על ביצוע בלוק הפקודות, וחוזר חלילה. בפעם הראשונה שהתנאי לא מתקיים (ערכו False), נפסק ביצוע הלולאה, ועוברים לפקודות שבהמשך התוכנית. ייתכן שזה יקרה כבר בפעם הראשונה שבודקים את התנאי, ואז בכלל לא נבצע את בלוק הפקודות, אפילו לא פעם אחת. אבל זה גם יכול לקרות אחרי מספר גדול מאוד של איטרציות. כפי שאמרנו, אנחנו לא יודעים מראש, ואין לנו צורך לדעת, כמה איטרציות יבוצעו.</p>
<p>הדוגמאות הראשונות שנביא כאן הן דוגמאות שבהן לא באמת חייבים להשתמש בלולאות while. הסיבה לכך היא שאנחנו רוצים להתחיל עם דוגמאות מוכרות שדומות לדוגמאות קודמות שכבר ראיתם כשלמדתם על לולאות for. אחרי שנבין היטב את התחביר והשימוש בלולאות while, נפנה גם לדוגמאות בהן הבחירה בלולאות while מחוייבת המציאות.</p>
<p>בואו נתחיל עם דוגמה פשוטה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="err">“</span><span class="n">goodbye</span><span class="err">”</span><span class="p">)</span>
</pre></div>
</div>
<p>בשורה הראשונה של התוכנית, לפני תחילת הלולאה, הוגדר משתנה בשם n והוא אותחל ב-0. בשורה השניה נבדק התנאי n&lt;10. התנאי מתקיים, כי הערך של הביטוי 0&lt;10 הוא True. לכן, נכנסים לגוף הלולאה ומבצעים את הפקודות: מדפיסים את ערכו של n (שהוא כרגע 0), ואח”כ מגדילים את n ב-1. עכשיו חוזרים ובודקים את התנאי n&lt;10. מכיוון ש 1&lt;10 הוא תנאי אמת, שוב נכנסים לגוף הלולאה ומבצעים את הפקודות שם: מדפיסים את ערכו של n (כרגע הוא 1), ומגדילים את n להיות 2. כך נמשך ביצוע הלולאה <strong>כל עוד</strong> התנאי n&lt;10 מתקיים.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="FMjRMIXEfuKZ" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#FMjRMIXEfuKZ {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsFMjRMIXEfuKZ=[{"question": "\u05de\u05d4\u05d5 \u05d4\u05e2\u05e8\u05da \u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05e9\u05dc \u05d7 \u05e9\u05d4\u05d5\u05d3\u05e4\u05e1?", "type": "numeric", "answers": [{"type": "value", "value": 9, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"type": "default", "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df. \u05d4\u05e4\u05e2\u05dd \u05d4\u05d0\u05d7\u05e8\u05d5\u05e0\u05d4 \u05e9\u05d1\u05d4 \u05d4\u05ea\u05e0\u05d0\u05d9 \u05de\u05ea\u05e7\u05d9\u05d9\u05dd \u05d4\u05d9\u05d0 \u05db\u05d0\u05e9\u05e8 n \u05e9\u05d5\u05d5\u05d4 9. \u05d4\u05ea\u05e0\u05d0\u05d9 9<10 \u05de\u05ea\u05e7\u05d9\u05d9\u05dd, \u05e0\u05db\u05e0\u05e1\u05d9\u05dd \u05dc\u05d2\u05d5\u05e3 \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4, \u05de\u05d3\u05e4\u05d9\u05e1\u05d9\u05dd \u05d0\u05ea 9, \u05d5\u05de\u05d2\u05d3\u05d9\u05dc\u05d9\u05dd \u05d0\u05ea n \u05dc-10. \u05e2\u05db\u05e9\u05d9\u05d5 \u05d1\u05d5\u05d3\u05e7\u05d9\u05dd \u05d0\u05ea \u05d4\u05ea\u05e0\u05d0\u05d9 10<10 \u05d5\u05ea\u05e0\u05d0\u05d9 \u05d6\u05d4 \u05d4\u05d5\u05d0 False. \u05dc\u05db\u05df \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4 \u05e2\u05d5\u05e6\u05e8\u05ea, \u05d5\u05e2\u05d5\u05d1\u05e8\u05d9\u05dd \u05dc\u05d4\u05de\u05e9\u05da \u05d4\u05ea\u05d5\u05db\u05e0\u05d9\u05ea, \u05db\u05dc\u05d5\u05de\u05e8 \u05dc\u05d4\u05d3\u05e4\u05e1\u05ea \u201cgoodbye\u201c. "}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("FMjRMIXEfuKZ")) {
    show_questions(questionsFMjRMIXEfuKZ, FMjRMIXEfuKZ);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>הריצו את התוכנית בחלונית וצפו בהדפסות:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple while loop</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;goodbye&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
6
7
8
9
goodbye
</pre></div>
</div>
</div>
</div>
<p>אולי שמתם לב, שבדוגמה הזו בעצם מספר האיטרציות כן היה ידוע מראש. אם n מאותחל ל-0, ברור שיבוצעו 10 איטרציות, אחת עבור כל מספר שלם בין 0 ל-9 (כולל). לכל ערך שלם התחלתי של n קל לומר מראש כמה איטרציות יבוצעו. ובאמת, היינו יכולים להשתמש פה בלולאת for:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;goodbye&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
6
7
8
9
goodbye
</pre></div>
</div>
</div>
</div>
<p>לולאת for נראית אפילו פשוטה יותר במקרה הזה. המסקנה מהדוגמה הזו היא שכל מה שאפשר לעשות עם לולאות for אפשר גם לעשות עם לולאות while. אבל ההיפך לא נכון. לסיכום, הנה תרשים שמתאר באופן כללי את אופן פעולתה של לולאת while:</p>
<img width=400 height=400 src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZkAAAGyCAYAAAA2zrk7AAAABHNCSVQICAgIfAhkiAAAIABJREFUeF7tnQd4VFX6xj8gCekhhQRIAoQamnSp9oIdC2LFtvYVK5ZFV/276u6Kbe1rV3QVQVDsiqKICtJBegs1lEBCIBBKmP/3Xp2YMjOZmrn3zvvx5CFz76m/M7nvPed855wGDjWhkQAJkAAJkEAICDQMQZpMkgRIgARIgAQMAhQZfhFIgARIgARCRoAiEzK0TJgESIAESIAiw+8ACZAACZBAyAhQZEKGlgmTAAmQAAlQZPgdIAESIAESCBkBikzI0DJhEiABEiABigy/AyRAAiRAAiEjQJEJGVomTAIkQAIkQJHhd4AESIAESCBkBCgyIUPLhEmABEiABCgy/A6QAAmQAAmEjABFJmRomTAJkAAJkABFht8BEiABEiCBkBGgyIQMLRMmARIgARKgyPA7QAIkQAIkEDICFJmQoWXCJEACJEACFBl+ByxFAAe5/vzzz/LKK6/4VO6SkhLZu3dvtThvv/22fP7553LgwAGf0gpn4PXr18trr70mK1as8LkYS5culXfeeUeKiop8jssIJOAvAYqMv+QYL2wE3n//fbn22mu9zn/79u1yzjnnGHH27dtXGe+2226TJ598UsrLy71OK9wBFyxYINdff70htL7a999/L3fccYcUFBT4GpXhScBvAlF+x2REErAIgW3btsnWrVslOjpa9u/fL3FxcSEteVlZmRw6dEjwP3peTmvcuLFkZGTUyhsih94UyoUy1jTn/eTk5MpbEMvS0tKaQY3PznQQpqKiQhITEyvDHT582CiXq7gNGjSQ+Ph4adSokct0eZEE/CFAkfGHGuNYikCHDh0EQ2N4yFd9UIeqEueff74hZhiiw0PdaXjY5+fny8033yzdunWrvL5p0ybj2sCBA+Xee++tVSyUfcKECfL1118b9yAczz33nEyaNKlWWFx4+OGH5cgjjzSGFH/77Td5+eWXK8NBXO666y5JSUmpFbdp06byyCOPSOvWrWvd4wUS8JcARcZfcoznMwG81ePhGxUVZfxUNTw4Dx486PIeruNhjbd8vG3XjIc0cR/3YmJiavUGkBce6rjfsKF3I8ToiSBdlBnxIFA1y+wOAHolW7ZskSVLlsjo0aMlKyvLqNsXX3whY8eOlenTpxu/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iownOrxHAiRAAiQQEAGKTED4GJkESIAESMATAYqMJzq8RwIkQAIkEBABikxA+BiZBEiABEjAEwGKjCc6vEcCJEACJBAQAYpMQPgYmQRIgARIwBMBiownOrxHAiRAAiQQEAGKTED4GJkESIAESMATAYqMJzq8RwIkQAIkEBABikxA+BiZBEiABEjAEwGKjCc6vEcCJEACJBAQAYpMQPgYmQRIgARIwBMBiownOrxHAiRAAiQQEAGKTED4GJkESIAESMATAYqMJzq8RwIkQAIkEBABikxA+BiZBEiABEjAE4EoTzf9vXfo0CEpKiqS8vJyf5NgPBKwBIGGDRtKWiL/7lIAAA44SURBVFqaJcrKQpJAOAiERGQOHz4sZ511VjjqwzxJoN4IVFRUyN69e2Xt2rX1liczIgGrEWjgULNaoVleEjADgR07dkifPn0oMmZoDJbBtAQ4J2PapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BCgy1m9D1oAESIAETEuAImPapmHBSIAESMD6BKKsXwXWgATqj8B///tf2bhxo5Hhvn37pKSkRP7+979XFqBnz55y7rnn1l+BmBMJmJwARcbkDcTimYvAjh075NFHH5XDhw9XFuzhhx82fm/cuLG8/fbb5iowS0MCYSbA4bIwNwCztxaBs88+W1q2bOmy0N26dZNjjjnG5T1eJIFIJUCRidSWZ739ItCpUyc544wzXMa95pprJCsry+U9XiSBSCXQwKEWqZVnvUnAHwLr1q2T3r17C4bOnNa9e3eZMWOGxMbG+pMk45CAbQmwJ2PbpmXFQkWgVatWMmrUqMrko6Oj5ZFHHqHAhAo407U0AYqMpZuPhQ8XgUsvvVTat29vZD9o0CAZMGBAuIrCfEnA1AQo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' /><p>לולאת ה<code class="docutils literal notranslate"><span class="pre">while</span></code> חוזרת על אותן שורות קוד עד שהתנאי בתחילת הלולאה מחזיר False</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">expression</span><span class="p">:</span>
    <span class="n">statement1</span>
    <span class="n">statement2</span>
    <span class="err">…</span>
<span class="n">rest</span> <span class="n">of</span> <span class="n">code</span><span class="err">…</span>
</pre></div>
</div>
<section id="indentation">
<h2>ההזחה (indentation) קובעת את גוף האיטרציה<a class="headerlink" href="#indentation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>איטרציה 0:</p>
<ul>
<li><p>ביצוע statement1, statement2, …</p></li>
</ul>
</li>
<li><p>איטרציה 1:</p>
<ul>
<li><p>ביצוע statement1, statement2, …</p></li>
</ul>
</li>
</ul>
<p>…</p>
<p>כאשר <code class="docutils literal notranslate"><span class="pre">expression</span></code> הוא <code class="docutils literal notranslate"><span class="pre">False</span></code> ⟶ “קפוץ” לשאר הקוד (כלומר, יציאה מהלולאה)</p>
<p>בהמשך נדגים מצבים שבהם באמת אין מנוס משימוש בלולאות while, כי אין דרך לדעת את מספר האיטרציות מראש. אבל לפני כן נתרגל מה שלמדנו.</p>
<p>השאלות הבאות מתייחסות לפונקציה המסתורית הבאה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mystery</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;aeiou&#39;</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="FsBtnUTTSwCE" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#FsBtnUTTSwCE {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsFsBtnUTTSwCE=[{"question": "\u05de\u05d4 \u05ea\u05d7\u05d6\u05d9\u05e8 \u05d4\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 mystery \u05e2\u05d1\u05d5\u05e8 \u05d4\u05e7\u05e8\u05d9\u05d0\u05d4: mystery(\"hello world. nice to meet you\")?", "type": "many_choice", "answers": [{"answer": "3", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "0", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "10", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "29", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}, {"question": "\u05de\u05d4 \u05e2\u05dc\u05d5\u05dc \u05dc\u05d2\u05e8\u05d5\u05dd \u05dc\u05d0\u05d9\u05e0\u05d3\u05e7\u05e1 \u05dc\u05d0 \u05d7\u05d5\u05e7\u05d9 \u05d1\u05e7\u05e8\u05d9\u05d0\u05d5\u05ea \u05dc\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4?", "type": "many_choice", "answers": [{"answer": ".hello world", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "hello world", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "\u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05e8\u05d9\u05e7\u05d4", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": ".hello world.", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("FsBtnUTTSwCE")) {
    show_questions(questionsFsBtnUTTSwCE, FsBtnUTTSwCE);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>תקנו כעת את הפונקציה כך שלעולם לא תיגש לאינדקס לא חוקי, אבל עדיין תבצע את אותה פעולה.</p>
<p>הנחיות:</p>
<p>יש להוסיף תנאי ללולאת ה-while, כלומר היא תיראה מהצורה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">________</span> <span class="ow">and</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="err">“</span><span class="o">.</span><span class="err">”</span><span class="p">:</span>
</pre></div>
</div>
<p>על התנאי הנוסף לדאוג לעצירת הלולאה כאשר מגיעים לסוף המחרוזת</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mystery</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="c1">## Modify anything you want in this function:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;aeiou&#39;</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span>
    

<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;hello. world.&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">mystery</span><span class="p">(</span><span class="s1">&#39;hello. world.&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;hello. world.&#39; has 2 vowels before the first period&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;hello. world.&#39; has 2 vowels before the first period but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;hello world. nice to meet you.&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">mystery</span><span class="p">(</span><span class="s1">&#39;hello world. nice to meet you.&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;hello world. nice to meet you.&#39; has 3 vowels before the first period&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;hello world. nice to meet you.&#39; has 3 vowels before the first period but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39; &#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">mystery</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: The string &#39; &#39; has no vowels&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: The string &#39; &#39; has no vowels but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39;dddda&#39;&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">mystery</span><span class="p">(</span><span class="s1">&#39;dddda&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;dddda&#39; has 1 vowel&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;dddda&#39; has 1 vowel but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking &#39;hello. world.&#39;
CORRECT: &#39;hello. world.&#39; has 2 vowels before the first period
********************
Checking &#39;hello world. nice to meet you.&#39;
CORRECT: &#39;hello world. nice to meet you.&#39; has 3 vowels before the first period
********************
Checking &#39; &#39;
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">119</span><span class="p">],</span> <span class="n">line</span> <span class="mi">35</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking &#39; &#39;&quot;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">35</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">mystery</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">36</span> <span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: The string &#39; &#39; has no vowels&quot;</span><span class="p">)</span>

<span class="nn">Cell In[119], line 5,</span> in <span class="ni">mystery</span><span class="nt">(st)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="k">while</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="k">if</span> <span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;aeiou&#39;</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>         <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

<span class="ne">IndexError</span>: string index out of range
</pre></div>
</div>
</div>
</div>
<p>השלימו את הפונקציה <code class="docutils literal notranslate"><span class="pre">skip_down</span></code> אשר מקבלת כקלט מספר num חיובי ומספר skip ומחזירה רשימה המכילה את כל המספרים מ-num ועד אפס בסדר יורד ובקפיצות של skip.</p>
<p>הנחיות:</p>
<p>השתמשו בלולאת <code class="docutils literal notranslate"><span class="pre">while</span></code>. בפרט, אסור להשתמש בלולאת <code class="docutils literal notranslate"><span class="pre">for</span></code> בשאלה זו (שימו לב שהיה אפשר להשתמש בלולאת for על range ואז השאלה היתה קלה הרבה יותר…)</p>
<p>על מנת להחזיר את הרשימה כדאי לאתחל רשימה ריקה <code class="docutils literal notranslate"><span class="pre">lst=[]</span></code>  ולהשתמש במתודה <code class="docutils literal notranslate"><span class="pre">append</span></code> על מנת להוסיף לרשימה איברים, לדוגמא <code class="docutils literal notranslate"><span class="pre">lst.append(10)</span></code></p>
<p>ניתן להניח כי המספרים <code class="docutils literal notranslate"><span class="pre">num</span></code> ו-<code class="docutils literal notranslate"><span class="pre">skip</span></code> הם חיוביים ושלמים</p>
<p>להלן מספר דוגמאות הרצה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">skip_down</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">skip_down</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this function so it uses for-range loops</span>

<span class="k">def</span><span class="w"> </span><span class="nf">skip_down</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">skip</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>
    

<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing list for skip_down(10, 2)&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">skip_down</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, skip_down(10, 2) returns [10, 8, 6, 4, 2, 0]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: skip_down(10, 2) should return [10, 8, 6, 4, 2, 0] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing list for skip_down(13, 2)&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">skip_down</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, skip_down(13, 2) returns [13, 11, 9, 7, 5, 3, 1]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: skip_down(13, 2) should return [13, 11, 9, 7, 5, 3, 1] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing list for skip_down(13, 20)&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">skip_down</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, skip_down(13, 20) returns [13]&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: skip_down(13) should return [13] but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Computing list for skip_down(10, 2)
WRONG: skip_down(10, 2) should return [10, 8, 6, 4, 2, 0] but the code returned None
********************
Computing list for skip_down(13, 2)
WRONG: skip_down(13, 2) should return [13, 11, 9, 7, 5, 3, 1] but the code returned None
********************
Computing list for skip_down(13, 20)
WRONG: skip_down(13) should return [13] but the code returned None
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/yNEgIxdIqso?si=TwFjtQXhA25xyHbH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p><strong>לנוחיותכם חלונית עם הקוד שראינו בסרטון. מוזמנים להריץ בעצמכם:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sum_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sum_range2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">start</span>
    <span class="k">while</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span> <span class="n">num</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h2>תרגול<a class="headerlink" href="#id9" title="Link to this heading">#</a></h2>
<p>בחלונית הקוד שלפניכם מופיעה הפונקציה avg המחשבת ממוצע ברשימת מספרים. ראינו את הפונקציה הזו בתרגיל ביחידה הקודמת. בפונקציה נעשה שימוש בלולאת for.</p>
<p>שנו את הפונקציה avg כך שתשתמש בלולאת while (במקום לולאת ה-for). שימו לב שגישה לאיברים של רשימה (או מחרוזת) באמצעות לולאת while מתאפשרת רק באמצעות גישה לאינדקסים של הרשימה ושימוש בסוגריים מרובעים [].</p>
<p>לאחר שסיימתם, הריצו את הקוד ובדקו האם הפונקציה עובדת כמצופה.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this function so it uses while loops</span>

<span class="k">def</span><span class="w"> </span><span class="nf">avg</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
         <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">num</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>



<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing the average of [1, 2, 3, 4, 5]&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">avg</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mf">3.0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, the average of [1, 2, 3, 4, 5] is 3.0&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: The average of [1, 2, 3, 4, 5] is 3.0 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing the average of [10, 10, 10, 100]&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">avg</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mf">32.5</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: Very good, the average of [10, 10, 10, 100] is 32.5&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: The average of [10, 10, 10, 100] is 32.5 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Computing the average of [1, 2, 3, 4, 5]
CORRECT: Very good, the average of [1, 2, 3, 4, 5] is 3.0
********************
Computing the average of [10, 10, 10, 100]
CORRECT: Very good, the average of [10, 10, 10, 100] is 32.5
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="hYBXzjxjoTjt" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#hYBXzjxjoTjt {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionshYBXzjxjoTjt=[{"question": "\u05d1\u05de\u05d4\u05dc\u05da \u05e8\u05d9\u05e6\u05ea \u05d4\u05ea\u05d5\u05db\u05e0\u05d9\u05ea, \u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05e0\u05db\u05e0\u05e1\u05d9\u05dd \u05dc\u05ea\u05d5\u05da \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4 (\u05db\u05dc\u05d5\u05de\u05e8, \u05de\u05d1\u05e6\u05e2\u05d9\u05dd \u05d0\u05ea \u05d4\u05e4\u05e2\u05d5\u05dc\u05d4 \u05e9\u05d1\u05e9\u05d5\u05e8\u05d4 3)?", "type": "many_choice", "answers": [{"answer": "1", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "2", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "3", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "4", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}, {"question": "\u05de\u05d4 \u05e2\u05e8\u05db\u05d5 \u05e9\u05dc num \u05d1\u05e1\u05d5\u05e3 \u05e8\u05d9\u05e6\u05ea \u05d4\u05ea\u05d5\u05db\u05e0\u05d9\u05ea (\u05dc\u05d0\u05d7\u05e8 \u05d4\u05d4\u05d3\u05e4\u05e1\u05d4 \u05d1\u05e9\u05d5\u05e8\u05d4 4)?", "type": "many_choice", "answers": [{"answer": "4", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "8", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "16", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "256", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}, {"question": "\u05d4\u05d0\u05dd \u05d4\u05ea\u05e9\u05d5\u05d1\u05d4 \u05dc\u05e9\u05d0\u05dc\u05d4 1 \u05d4\u05d9\u05d9\u05ea\u05d4 \u05de\u05e9\u05ea\u05e0\u05d4 \u05d0\u05dd \u05d4\u05d9\u05d9\u05e0\u05d5 \u05de\u05e9\u05e0\u05d9\u05dd \u05d0\u05ea \u05e9\u05d5\u05e8\u05d4 2 \u05dc: while num < 30?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05dc\u05d0", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}, {"question": "\u05e8\u05d9\u05e7 \u05d5\u05de\u05d5\u05e8\u05d8\u05d9 \u05d4\u05dd \u05e1\u05d8\u05d5\u05d3\u05e0\u05d8\u05d9\u05dd \u05d1\u05e7\u05d5\u05e8\u05e1. \u05db\u05e9\u05d4\u05e1\u05ea\u05db\u05dc\u05d5 \u05e2\u05dc \u05e7\u05d8\u05e2 \u05d4\u05e7\u05d5\u05d3 \u05d4\u05de\u05e7\u05d5\u05e8\u05d9 (\u05dc\u05dc\u05d0 \u05d4\u05e9\u05d9\u05e0\u05d5\u05d9 \u05d1\u05e1\u05e2\u05d9\u05e3 \u05dc\u05e2\u05d9\u05dc), \u05e8\u05d9\u05e7 \u05d8\u05e2\u05df \u05e9\u05d0\u05d9\u05ea\u05d7\u05d5\u05dc \u05e2\u05e8\u05da \u05d4\u05de\u05e9\u05ea\u05e0\u05d4 num \u05dc-1 \u05d1\u05e9\u05d5\u05e8\u05d4 1 \u05dc\u05d0 \u05e4\u05d5\u05d2\u05e2 \u05de\u05e9\u05e0\u05d4 \u05e9\u05dc num \u05d1\u05e1\u05d9\u05d5\u05dd \u05e8\u05d9\u05e6\u05ea \u05d4\u05ea\u05d5\u05db\u05e0\u05d9\u05ea. \u05de\u05d5\u05e8\u05d8\u05d9 \u05d8\u05e2\u05df \u05db\u05d9 \u05e8\u05d9\u05e7 \u05d8\u05d5\u05e2\u05d4. \u05de\u05d9 \u05de\u05d1\u05d9\u05df \u05d4\u05e9\u05e0\u05d9\u05d9\u05dd \u05e6\u05d5\u05d3\u05e7?", "type": "many_choice", "answers": [{"answer": "\u05e8\u05d9\u05e7", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05de\u05d5\u05e8\u05d8\u05d9", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("hYBXzjxjoTjt")) {
    show_questions(questionshYBXzjxjoTjt, hYBXzjxjoTjt);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
<section id="id10">
<h2>לולאות אינסופיות – ראו הוזהרתם!<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<p>לולאות while מציבות לפתחנו סיכון שעלינו להיות מודעים אליו. בעוד שלולאות for נעצרות כאשר הגענו לסוף סדרת הערכים בiterable שהצבנו בfor, בלולאות while אנחנו אחראים לכך שבמוקדם או במאוחר התנאי כבר לא יתקיים עוד והלולאה תעצור. לולאה אינסופית תיווצר כאשר נשכח לעדכן את המשתנה הקשור לתנאי הלולאה, או שנגדיר תנאי שלעולם
לא ישוערך ל- False. למשל, בדוגמה הבאה, מה היה קורה אילו בטעות היינו משמיטים את השורה <code class="docutils literal notranslate"><span class="pre">num</span> <span class="pre">=</span> <span class="pre">num+1</span></code>, כלומר, שוכחים להגדיל את num ב-1 בכל איטרציה של הלולאה?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sum_range2</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">start</span>
    <span class="k">while</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">+</span><span class="n">num</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">+</span><span class="mi">1</span> <span class="c1">##Accidently this line was dropped</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>טעות זו מסתברת כבעלת השלכות דרמטיות. מה יקרה למשל אם נריץ כעת:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sum_range2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>הלולאה תמשיך, תאורטית לפחות, לרוץ לנצח! הרי הערך של num לנצח יהיה 1, ולכן התנאי num&lt;end יתקיים תמיד. בסרטון הבא נדגים את זה קורה בפועל.</p>
<p>להלן מספר קטעי קוד. קבע עבור כל אחד מהם האם הוא יוצר לולאה אינסופית.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># קטע 1</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># קטע 2</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">10</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># קטע 3</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># קטע 4</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># קטע 5</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">10</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="mNPVjgfhkMgu" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#mNPVjgfhkMgu {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsmNPVjgfhkMgu=[{"question": "\u05d4\u05d0\u05dd \u05e7\u05d8\u05e2 1 \u05d9\u05d5\u05e6\u05e8 \u05dc\u05d5\u05dc\u05d0\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05dc\u05d0", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}, {"question": "\u05d4\u05d0\u05dd \u05e7\u05d8\u05e2 2 \u05d9\u05d5\u05e6\u05e8 \u05dc\u05d5\u05dc\u05d0\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05dc\u05d0", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}, {"question": "\u05d4\u05d0\u05dd \u05e7\u05d8\u05e2 3 \u05d9\u05d5\u05e6\u05e8 \u05dc\u05d5\u05dc\u05d0\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "\u05dc\u05d0", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}, {"question": "\u05d4\u05d0\u05dd \u05e7\u05d8\u05e2 4 \u05d9\u05d5\u05e6\u05e8 \u05dc\u05d5\u05dc\u05d0\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05dc\u05d0", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}, {"question": "\u05d4\u05d0\u05dd \u05e7\u05d8\u05e2 5 \u05d9\u05d5\u05e6\u05e8 \u05dc\u05d5\u05dc\u05d0\u05d4 \u05d0\u05d9\u05e0\u05e1\u05d5\u05e4\u05d9\u05ea?", "type": "many_choice", "answers": [{"answer": "\u05db\u05df", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "\u05dc\u05d0", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("mNPVjgfhkMgu")) {
    show_questions(questionsmNPVjgfhkMgu, mNPVjgfhkMgu);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/eUuxmC5TEjg?si=QcZbcNxvbatWzslJ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
</section>
<section id="id11">
<h2>דוגמה לשימוש בלולאת while – הטלת קוביה<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<p>כל הדוגמאות שראיתם עד כה לא באמת הצריכו לולאות while. אבל הן היו חשובות כדי להבין את התחביר של לולאות מסוג זה. הדוגמה שניראה כעת שונה – בדוגמה זו חייבים להשתמש בלולאות while. לאחר מכן נראה בסרטון עוד דוגמה נחמדה להשערה מתמטית מפורסמת.
מתי בפעם האחרונה הטלתם קוביה? הטלת קוביה או מטבע היא שיטה פשוטה לבחור תוצאה מסויימת באופן אקראי. למשל, אם אתם צריכים להחליט מי יפנה את האשפה, את או אחיך הקטן, אפשר להטיל מטבע כאשר כל צד במטבע מייצג תוצאה אפשרית. אם המטבע הוגן (הסיכוי שלו ליפול על כל צד זהה), וההטלה הוגנת (לא מנסים לגרום למטבע ליפול על איזשהו צד במכוון), התוצאה תהיה אקראית. אי אפשר לדעת מראש על איזה צד ייפול המטבע, ואם נטיל אותו פעמים רבות, נצפה שהוא ייפול על כל אחד מהצדדים שלו מספר דומה של פעמים (אם כי לא מובטח, ואף לא סביר, שהמספרים יהיו ממש זהים). הטלת קוביה עם 6 פאות דומה בכך שגם היא מספקת תוצאה אקראית, אלא שכאן יש 6 תוצאות אפשריות ולא 2.</p>
<p>איך זה קשור לענייננו – לולאות while? נניח שאנחנו רוצים להטיל קוביה מספר פעמים, ולספור את כמות ההטלות עד שמתקבלת התוצאה 6. בהנחה שהקוביה הוגנת במובן שהוזכר קודם, אין לנו דרך לדעת מראש כמה הטלות כאלו יידרשו. מעבר לכך, בכל “ניסוי” כזה מספר ההטלות עשוי בהחלט להשתנות. פעם אחת נקבל 6 מייד בהטלה הראשונה, ופעם רק בהטלה העשירית. ייתכן גם, אם כי מאוד לא סביר, שנקבל 6 רק אחרי 1000 הטלות. אבל הנקודה היא שמאחר שמספר האיטרציות כאן לא יכול להיות ידוע מראש, אם נרצה לכתוב תוכנית בפייתון שתדמה הטלת קוביה, נצטרך להשתמש בלולאות. <strong>בסרטון הבא נכתוב יחד תכנית זו.</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/qhtRPba6BjE?si=1rnoInDsS36z6do9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p><strong>לנוחיותכם חלונית עם הקוד שראינו בסרטון. מוזמנים להריץ בעצמכם:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="k">def</span><span class="w"> </span><span class="nf">count_rolls_until_6</span><span class="p">():</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="n">count_rolls</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">res</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="n">count_rolls</span> <span class="o">=</span> <span class="n">count_rolls</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">count_rolls</span>


<span class="n">rolls</span> <span class="o">=</span> <span class="n">count_rolls_until_6</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rolls</span><span class="p">,</span> <span class="s2">&quot;rolls were needed to get 6 in a fair dice experiment&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
6
2 rolls were needed to get 6 in a fair dice experiment
</pre></div>
</div>
</div>
</div>
</section>
<section id="id12">
<h2>תרגול<a class="headerlink" href="#id12" title="Link to this heading">#</a></h2>
<p>בחלונית הקוד שלפניכם מופיעה הפונקציה count_rolls_until_6 אותה הצגנו בסרטון, אך בשינוי קל - הפעם הפונקציה מקבלת כקלט פרמטר אחד בשם n (שאנו נניח כי הוא מספר שלם חיובי).</p>
<p>עליכם לשנות את הפונקציה כך שהיא תחזיר את מספר ההטלות שנדרשו עד לקבלת המספר 6 n פעמים (למשל: עבור n = 3 הפונקציה תחזיר כמה הטלות נדרשו בהרצה הנוכחית עד שקיבלנו 3 פעמים את המספר 6).</p>
<p>הנחיות:</p>
<p>המבנה הכללי של הפונקציה נשאר דומה - יש לבצע “הטלה” ראשונה של הקוביה, ולאחר מכן, בתוך לולאת while, לבצע הגרלות נוספות לפי הצורך. אז מה כן שונה? בעיקר התנאי של הלולאה - עליכם להוסיף מונה נוסף (תנו לו שם כרצונכם) שיהיה אחראי על ספירת ההטלות בהן קיבלנו 6 (שימו לב - זהו מונה שונה מ-count_rolls שסופר את מספר ההטלות הכולל, ואת ערכו יש להחזיר בסוף הפונקציה). חישבו היכן וכיצד לאתחל מונה זה. הלולאה תרוץ כל עוד ערכו של מונה זה קטן מ-n. ומה קורה בתוך הלולאה? כמו קודם, מגרילים מספר חדש. אם התוצאה היא 6 - הגדילו את ערכו של המונה החדש ב-1. ובכל מקרה - בין אם התוצאה היא 6 ובין אם לא - הגדילו את המונה count_rolls. לאחר שיוצאים מהלולאה, כלומר, כאשר קיבלנו 6 n פעמים, מחזירים את מספר ההטלות הכולל.</p>
<p>לאחר שסיימתם לכתוב את הקוד, שנו את המשתנה n שמופיע מתחת לפונקציה למספר חיובי ושלם כרצונכם (זהו הקלט של הפונקציה), הריצו את הקוד, ובדקו לפי תוצאות ההטלות (המודפסות למסך) האם הקוד שלכם עובד (אין צורך לכתוב את הקריאה לפונקציה, עשינו זאת עבורכם).</p>
<p>דוגמת הרצה:</p>
<p>עבור n=2, זהו פלט אפשרי עבור פתרון נכון של התרגיל (ההטלות בהן התקבלה התוצאה 6 מודגשות):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="c1"># Modify this function:</span>
<span class="k">def</span><span class="w"> </span><span class="nf">count_rolls_until_6</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="n">count_rolls</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">res</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="n">count_rolls</span> <span class="o">=</span> <span class="n">count_rolls</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">count_rolls</span>


<span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">rolls</span> <span class="o">=</span> <span class="n">count_rolls_until_6</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rolls</span><span class="p">,</span> <span class="s2">&quot;rolls were needed to get&quot;</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span><span class="s2">&quot;times 6 in a fair dice experiment&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
5
2
5
3
3
6
7 rolls were needed to get 1 times 6 in a fair dice experiment
</pre></div>
</div>
</div>
</div>
<p>בחלונית הקוד להלן מופיעה כותרת הפונקציה birthday המקבלת כקלט תאריך לידה המורכב משני פרמטרים - day ו-month - יום וחודש. אנו נניח כי day הוא מספר שלם בין 1 ל-31 ו-month מספר שלם בין 1 ל-12:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="k">def</span><span class="w"> </span><span class="nf">count_rolls_until_6</span><span class="p">():</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="c1">#print(res)</span>
    <span class="n">count_rolls</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">res</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="c1">#print(res)</span>
        <span class="n">count_rolls</span> <span class="o">=</span> <span class="n">count_rolls</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">count_rolls</span>

<span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">32</span><span class="p">)]</span>
<span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">)]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">birthday</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">):</span>
    <span class="c1"># Write your solution here</span>
    <span class="k">pass</span>
    
    
    
<span class="n">day</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">month</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It took&quot;</span><span class="p">,</span> <span class="n">birthday</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">),</span> <span class="s2">&quot;trials to draw this birthday:&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>It took None trials to draw this birthday: 1 . 1
</pre></div>
</div>
</div>
</div>
<p>עליכם לממש את הפונקציה birthday כך שהיא תגריל תאריכי לידה שוב ושוב עד שיתקבל התאריך שהתקבל כקלט, ולבסוף תחזיר את מספר ההגרלות שנדרש.</p>
<section id="id13">
<h3>הנחיות:<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>כפי שודאי שמתם לב, זהו תרגיל דומה למה שראינו בסרטון, אלא שכאן נדרשים שני תנאים - צריך שתהיה התאמה בין התאריך שהוגרל לתאריך הקלט גם ביום וגם בחודש. במילים אחרות - כל עוד היום שהוגרל שונה מיום הקלט או החודש שהוגרל שונה מחודש הקלט - נמשיך להגריל תאריכים. לצורך כך ניזכר במילה or בפייתון בה כבר נתקלנו כשלמדנו על ביטויי תנאי מורכבים. נסביר שוב בקצרה איך היא עובדת באמצעות שורת הקוד הבאה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">condition1</span> <span class="ow">or</span> <span class="n">condition2</span><span class="p">:</span>
</pre></div>
</div>
<p>כאשר condition1 ו-condition2 הם שמות תנאים בוליאניים כלליים (כלומר, ביטויים שערכם הוא True או False, כגון 3 &gt; 5, 6 =! 7 וכו’). אנו מתייחסים לביטוי condition1 or condition2   כתנאי בוליאני בפני עצמו, התלוי בשני החלקים הללו - התנאי משוערך ל-True כאשר לפחות אחד מהתנאים משוערך ל-True, ומנגד, משוערך ל-False אך ורק אם שני התנאים הללו משוערכים ל-False. למשל, השורה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">3</span> <span class="ow">or</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
</pre></div>
</div>
<p>שקולה לשורה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</pre></div>
</div>
<p>שכן התנאי הראשון משוערך ל-True (זה היה נכון גם אם דווקא התנאי השני היה זה שמשוערך ל-True, ובפרט - זה נכון גם כאשר שניהם משוערכים ל-True).</p>
<p>לעומת זאת, השורה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
</pre></div>
</div>
<p>שקולה לשורה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">False</span><span class="p">:</span>
</pre></div>
</div>
<p>מכיוון שכאן שני התנאים משוערכים ל-False.</p>
<p>עד כאן התזכורת לגבי המילה or וכיצד משתמשים בה. אנו ממליצים לכם להיעזר ב-or לפתרון התרגיל.</p>
<p>בנוסף, אתחלנו עבורכם שני משתנים בשמות days ו-months שערכיהם הן רשימות עם המספרים בין 1 ל-31 ובין 1 ל-12 בהתאמה (אנו מניחים כאן הנחה מקלה - שבכל החודשים יש 31 ימים, ולכן ב”שנה” שלנו קיימים תאריכים שלא קיימים במציאות כמו 30.2 וכו’). <strong>השתמשו במשתנים אלו כדי להגריל יום וחודש</strong>.</p>
<p>ניתן להוסיף הדפסות עזר (בדומה לאלו שנמצאות בהערה בפונקציה count_rolls_until_6) כדי לעקוב אחר התאריכים המוגרלים ולוודא כי אתם יוצאים מהלולאה רק לאחר הגרלת תאריך הקלט.</p>
<p>לבסוף, לאחר שסיימתם לכתוב את הפונקציה, עדכנו את המשתנים day ו-month שבתחתית הקוד ליום ולחודש הלידה שלכם, הריצו את הקוד ובדקו את עצמכם.</p>
<p><strong>נקודה למחשבה</strong>: לכמה הגרלות תזדקקו <strong>בממוצע</strong> עד שתגרילו את תאריך הקלט? רמז: כדי לקבל מספר מסוים (למשל: 3) בקובייה הוגנת (בעלת 6 פאות), דרושות בממוצע 6 הטלות.</p>
</section>
</section>
<section id="for-while">
<h2>סיכום ביניים – לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> לעומת לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code><a class="headerlink" href="#for-while" title="Link to this heading">#</a></h2>
<p>ביחידה הזו הכרנו את הסוג השני של לולאות בשפת פייתון – לולאות while. בואו נסכם מה ראינו עד עכשיו תוך השוואה בין שני סוגי הלולאות.</p>
<ul class="simple">
<li><p>לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code>: משמשות לביצוע קטע קוד באופן חזרתי, מספר ידוע מראש של פעמים. לולאות אלו שימושיות למשל לצורך מעבר על תוי מחרוזת (str), אברי רשימה (list), או מספרים בטווח (range). בכל המקרים האלו אכן מספר האיטרציות ידוע מראש. כמו כן, אם פשוט רוצים לבצע פעולה כלשהי מספר פעמים, ניתן לשים את הפעולה בתוך לולאת for מהצורה:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
       <span class="n">פעולה</span>
</pre></div>
</div>
<p>כאשר n הוא מספר הפעמים שרוצים לבצע את הפעולה.</p>
<ul class="simple">
<li><p>לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code>: משמשות לביצוע קטע קוד באופן חזרתי כל עוד מתקיים תנאי מסויים. לולאות אלו הכרחיות כאשר לא ידוע לנו מראש מספר האיטרציות, כפי שראינו בדוגמת הטלת הקוביה עד להשגת התוצאה 6. יחד עם זאת, אפשר כמובן להשתמש בלולאות while גם כאשר ידוע מראש מספר האיטרציות. תמיד אפשר לכתוב למשל לולאה כזו:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">:</span>
       <span class="n">פעולה</span>	
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
</pre></div>
</div>
<p>לולאה זו למעשה שקולה לולאת ה-<code class="docutils literal notranslate"><span class="pre">for</span></code> שלעיל, וגם היא מבצעת פעולה מסויימת בדיוק n פעמים.</p>
<p>לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code> בפייתון דורשות זהירות מסויימת, כי המתכנת אחראי להגדרת הלולאה באופן תקין, שתעצור אחרי מספר סופי של איטרציות (כלומר שלא תיכנס ללולאה אינסופית). הטעות הנפוצה בעניין זה היא לשכוח לקדם את הלולאה אל עבר סיומה. בדוגמה הנ”ל זוהי הפקודה <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">i+1</span></code> שדואגת שאכן הלולאה תסתיים, כי בכל פעם i  מתקרב ל-n (בהנחה ש-n לא מספר שלילי!). אבל לולאה אינסופית יכולה להיגרם גם מטעות בתנאי הלולאה או מאיתחול לא נכון של משתנה הלולאה (i בדוגמה הנ”ל).</p>
<p>ביחידה הבאה נראה עוד שתי דוגמאות מעניינות לשימוש בלולאות (דוגמה אחת לכל סוג לולאה), ונקדיש עוד קצת זמן לתרגול הנושא החשוב הזה.</p>
</section>
<section id="id14">
<h2>פתרון בעיות באמצעות לולאות<a class="headerlink" href="#id14" title="Link to this heading">#</a></h2>
<section id="id15">
<h3>זיהוי פולינדרום<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p>את השפה העברית אנחנו כותבים וקוראים בד”כ מימין לשמאל. כך גם בערבית. לעומת זאת בשפות כמו אנגלית, רוסית, צרפתית וגם באמהרית כותבים וקוראים משמאל לימין. בכל השפות האלו ובאחרות ישנן מילים שאפשר לקרוא אותן בשני הכיוונים באותו אופן. למשל, המילה ‘אמא’ בעברית, או המילה radar באנגלית. מילים כאלו נקראות “פלינדרום”.</p>
<p>כעת ננסח בצורה מעט יותר פורמלית את בעית הפולינדרום. הקלט לבעיה שלנו הוא מחרוזת. אם המחרוזת ניתנת לקריאה בשני הכיוונים באופן זהה הפלט יהיה True.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="YrTrpULTrgDr" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#YrTrpULTrgDr {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsYrTrpULTrgDr=[{"question": "\u05e1\u05de\u05e0\u05d5 \u05de\u05d1\u05d9\u05df \u05d4\u05d1\u05d9\u05d8\u05d5\u05d9\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05e4\u05dc\u05d9\u05e0\u05d3\u05e8\u05d5\u05de\u05d9\u05dd \u05de\u05d5\u05e9\u05dc\u05de\u05d9\u05dd \u05d1\u05dc\u05d1\u05d3.", "type": "many_choice", "answers": [{"answer": "azaz", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "qwerty", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "sator arepo tenet opera rotas", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "racecar", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("YrTrpULTrgDr")) {
    show_questions(questionsYrTrpULTrgDr, YrTrpULTrgDr);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>אז איך ייראה אלגוריתם לפתרון בעיית זיהוי פלינדרום?</p>
<p>הנה אלגוריתם אפשרי: נתחיל משני קצוות המחרוזת ונשווה את התווים המתאימים. אם הם שונים, נוכל כבר ברגע זה להכריז שהמחרוזת היא <strong>לא פלינדרום</strong>. אם הם שווים, נזוז צעד אחד פנימה משני צדי המחרוזת ונבדוק אם שני התווים הבאים שווים.</p>
<p>למשל, “RADAT” תתגלה כמחרוזת שאיננה פלינדרום כבר בבדיקת זוג התווים הראשון שבקצוות.</p>
<p>לעומת זאת אם התווים שבקצוות שווים, לא נוכל לדעת דבר בשלב זה. המחרוזת יכולה להיות פלינדרום ויכולה שלא להיות, צריך להמשיך לבדוק. לכן, נזוז צעד אחד פנימה משני קצוות המחרוזת ונבדוק אם שני התווים הבאים שווים. ושוב: אם הם לא שווים, נוכל לסיים ולהכריז שהמחרוזת היא לא פלינדרום.</p>
<p>אחרת נצטרך להמשיך, וחוזר חלילה.</p>
<p>מתי נוכל לקבוע בוודאות שמצאנו פלינדרום? התהליך הזה יימשך כל עוד התו הימני שמשווים אכן נמצא מימין לתו השמאלי שמשווים. בפעם הראשונה שתנאי זה לא מתקיים, נוכל להכריז שהמחרוזת הנתונה היא אכן פלינדרום. שימו לב שלא צריך להמשיך לבצע את הבדיקה אחרי שמתקיים התנאי, כי ברגע שנעבור את האמצע נתחיל לבצע השוואות שכבר ביצענו קודם.</p>
<p>רגע, <strong>אמרנו כל עוד?? אמרנו לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code>!</strong></p>
<p>הרבה פעמים הדרך שבה אנחנו מנסחים לעצמנו את האלגוריתם במילים מעידה על סוג הלולאה שאותה כדאי לבחור. במקרה הזה טבעי להשתמש בלולאות while, אם כי היה אפשר גם להשתמש בלולאות for.</p>
<p>לפני שנקפוץ לממש את האלגוריתם הזה בפייתון, בואו נכתוב אותו בפסאודו קוד. נשתמש בשני משתנים שיכילו אינדקסים במחרוזת. הם יאותחלו לקצוות, ויזוזו פנימה בכל איטרציה.</p>
<p><strong>זיהוי פלינדרום (קלט: המחרוזת st)</strong></p>
<ol class="arabic simple">
<li><p>אתחל l=0, r=len(st)-1</p></li>
<li><p>כל עוד l&lt;r:<br />
2.1 אם st[l] לא שווה ל- st[r]:<br />
2.1.1. החזר False וסיים
2.2 הגדל את l ב- 1 והקטן את r ב- 1</p></li>
<li><p>החזר True</p></li>
</ol>
<p>בהתחלה נגדיר שני משתנים עם השמות l (left) ו-r (right). נאתחל את l לאינדקס השמאלי ביותר של המחרוזת, כלומר 0, ואת r לימני ביותר, כלומר אורך המחרוזת פחות 1 (פחות 1, כי מתחילים ב-0). ואז נריץ בלולאה כל עוד <code class="docutils literal notranslate"><span class="pre">l&lt;r</span></code>, ונשווה את תווי המחרוזת באינדקסים l ו-r. אם הם שונים אנחנו יודעים בדיוק מה לעשות – לסיים את ריצת האלגוריתם ולהחזיר False. אם הם שווים, צריך להמשיך בלולאה, אבל לא לפני שנזיז את l מקום אחד ימינה, כלומר נגדיל אותו ב-1, ואת r נזיז שמאלה, כלומר נקטין אותו ב-1. משורה 2.2 חוזרים לבדוק את התנאי שבשורה 2 פעם נוספת. כך ממשיך התהליך עד שקורה אחד משניים: או שמתישהו מגלים תווים מתאימים ששונים זה מזה, ומחזירים False, או שהלולאה מסתיימת כי האינדקס l כבר לא קטן מהאינדקס r, כלומר או שהמשתנים l ו-r נפגשו, או שהם חלפו זה על פני זה. אחד מהשניים בטוח יקרה בשלב מוקדם או מאוחר. אם הלולאה הסתיימה מהסיבה השניה, אפשר סוף סוף להחזיר True.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="HJRaaxbvRpTJ" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#HJRaaxbvRpTJ {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsHJRaaxbvRpTJ=[{"type": "numeric", "question": "\u05e0\u05e0\u05d9\u05d7 \u05db\u05d9 \u05d0\u05e0\u05d5 \u05de\u05e8\u05d9\u05e6\u05d9\u05dd \u05d0\u05ea \u05d4\u05d0\u05dc\u05d2\u05d5\u05e8\u05d9\u05ea\u05dd \u05e9\u05d1\u05d5\u05d3\u05e7 \u05dc\u05e2\u05d9\u05dc \u05e2\u05dc \u05d4\u05de\u05d9\u05dc\u05d4 'racekar', \u05db\u05de\u05d4 \u05d0\u05d9\u05d8\u05e8\u05e6\u05d9\u05d5\u05ea \u05e9\u05dc \u05d1\u05d3\u05d9\u05e7\u05d4 \u05e0\u05d1\u05e6\u05e2 \u05e2\u05d3 \u05e9\u05e0\u05d7\u05d6\u05d9\u05e8 False (\u05db\u05d5\u05dc\u05dc \u05d4\u05d1\u05d3\u05d9\u05e7\u05d4 \u05e9\u05d1\u05e1\u05d5\u05e4\u05d4 \u05e0\u05d7\u05d6\u05d9\u05e8 False)?", "answers": [{"type": "value", "value": 3, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"type": "default", "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}, {"type": "short_answer", "question": "\u05e2\u05d9\u05e6\u05e8\u05d5 \u05d5\u05d7\u05e9\u05d1\u05d5: \u05e2\u05d1\u05d5\u05e8 \u05d0\u05d9\u05dc\u05d5 \u05d0\u05d5\u05e8\u05db\u05d9\u05dd \u05e9\u05dc \u05de\u05d7\u05e8\u05d5\u05d6\u05d5\u05ea \u05d4\u05de\u05e9\u05ea\u05e0\u05d9\u05dd i \u05d5-j \u05d9\u05d9\u05e4\u05d2\u05e9\u05d5 \u05d1\u05d0\u05de\u05e6\u05e2 \u05d4\u05de\u05d7\u05e8\u05d5\u05d6\u05ea, \u05d5\u05e2\u05d1\u05d5\u05e8 \u05d0\u05d9\u05dc\u05d5 \u05d0\u05d5\u05e8\u05db\u05d9\u05dd \u05e9\u05dc \u05de\u05d7\u05e8\u05d5\u05d6\u05d5\u05ea \u05d4\u05dd \u05d9\u05d7\u05dc\u05e4\u05d5 \u05d6\u05d4 \u05e2\u05dc \u05e4\u05e0\u05d9 \u05d6\u05d4 \u05d1\u05d0\u05de\u05e6\u05e2 \u05d4\u05de\u05d7\u05e8\u05d5\u05d6\u05ea?", "answers": [{"answer": "\u05d4\u05e6\u05d2 \u05ea\u05e9\u05d5\u05d1\u05d4", "correct": true, "feedback": "\u05d4\u05ea\u05e9\u05d5\u05d1\u05d4 \u05ea\u05dc\u05d5\u05d9\u05d4 \u05d1\u05d4\u05e1\u05d1\u05e8 \u2013 \u05d6\u05d5 \u05e9\u05d0\u05dc\u05d4 \u05e4\u05ea\u05d5\u05d7\u05d4 \u05e2\u05dd \u05d3\u05d9\u05d5\u05df \u05e2\u05e7\u05e8\u05d5\u05e0\u05d9."}]}, {"type": "many_choice", "question": "\u05de\u05d4 \u05de\u05e1\u05e4\u05e8 \u05d4\u05d0\u05d9\u05d8\u05e8\u05e6\u05d9\u05d5\u05ea \u05d4\u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9 \u05e9\u05d9\u05d1\u05e6\u05e2 \u05d4\u05d0\u05dc\u05d2\u05d5\u05e8\u05d9\u05ea\u05dd \u05e9\u05dc\u05e0\u05d5, \u05e2\u05d1\u05d5\u05e8 \u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05d1\u05d0\u05d5\u05e8\u05da n? \u05db\u05dc\u05d5\u05de\u05e8 \u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05dc\u05db\u05dc \u05d4\u05d9\u05d5\u05ea\u05e8 \u05e0\u05d9\u05db\u05e0\u05e1 \u05dc\u05d2\u05d5\u05e3 \u05d4\u05dc\u05d5\u05dc\u05d0\u05d4?", "answers": [{"answer": "\u05de\u05d7\u05e6\u05d9\u05ea \u05de\u05d0\u05d5\u05e8\u05da \u05d4\u05de\u05d7\u05e8\u05d5\u05d6\u05ea (n/2, \u05de\u05e2\u05d5\u05d2\u05dc \u05db\u05dc\u05e4\u05d9 \u05de\u05d8\u05d4)", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "\u05de\u05d7\u05e6\u05d9\u05ea \u05d4\u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05d5\u05e2\u05d5\u05d3 1", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05ea\u05dc\u05d5\u05d9 \u05d0\u05dd n \u05d6\u05d5\u05d2\u05d9 \u05d0\u05d5 \u05d0\u05d9-\u05d6\u05d5\u05d2\u05d9", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05de\u05d7\u05e6\u05d9\u05ea \u05de\u05d0\u05d5\u05e8\u05da \u05d4\u05de\u05d7\u05e8\u05d5\u05d6\u05ea \u05e4\u05d7\u05d5\u05ea 1 (n//2 - 1)", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("HJRaaxbvRpTJ")) {
    show_questions(questionsHJRaaxbvRpTJ, HJRaaxbvRpTJ);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>בתרגיל זה נכתוב שתי פונקציות - אחת לזיהוי פלינדרום מושלם ואחת לזיהוי פלינדרום “כללי”.</p>
<p>בואו נתחיל מזיהוי פלינדרום מושלם - הפונקציה שנכתוב נקראת is_palindrome ומקבלת כקלט מחרוזת string, להלן תזכורת לפסאודו-קוד שתארנו ביחידה הקודמת:</p>
<p>זיהוי פלינדרום (קלט: מחרוזת st)</p>
<ol class="arabic simple">
<li><p>אתחל l=0, r=len(st)-1</p></li>
<li><p>כל עוד l&lt;r:<br />
2.1 אם st[l] לא שווה ל- st[r]:<br />
2.1.1 החזר False וסיים
2.2 הגדל את l ב- 1 והקטן את r ב- 1</p></li>
<li><p>החזר True</p></li>
</ol>
<p>השלימו את הקוד לפונקציה בחלונית הקודבורד. הקפידו להשתמש בלולאת while ולא בלולאת for. כמו כן, הריצו את הפונקציה שלכם על דוגמאות ההרצה הבאות כדי לוודא שהיא עובדת נכון (לפחות עבור מקרים אלו).</p>
<p>דוגמאות הרצה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;anna&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;radar radar&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;Anna&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">is_palindrome</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>

        
<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking if &#39;anna&#39; is a perfect palindrome&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;anna&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;anna&#39; is a perfect palindrome&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;anna&#39; is a perfect palindrome but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking if &#39;A man, a plan, a canal, Panama&#39; is a perfect palindrome&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;A man, a plan, a canal, Panama&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;A man, a plan, a canal, Panama&#39; is not a perfect palindrome&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;A man, a plan, a canal, Panama&#39; is not a perfect palindrome but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking if &#39;a nN.a&#39; is a perfect palindrome&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">is_palindrome</span><span class="p">(</span><span class="s1">&#39;a nN.a&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: &#39;a nN.a&#39; is not a perfect palindrome&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: &#39;a nN.a&#39; is not a perfect palindrome but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking if &#39;anna&#39; is a perfect palindrome
WRONG: &#39;anna&#39; is a perfect palindrome but the code returned None
********************
Checking if &#39;A man, a plan, a canal, Panama&#39; is a perfect palindrome
WRONG: &#39;A man, a plan, a canal, Panama&#39; is not a perfect palindrome but the code returned None
********************
Checking if &#39;a nN.a&#39; is a perfect palindrome
WRONG: &#39;a nN.a&#39; is not a perfect palindrome but the code returned None
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/iDf3Fi3sTLg?si=lps1Mz5y4LWnWZ7h" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="DxyjXxnbMTst" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#DxyjXxnbMTst {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsDxyjXxnbMTst=[{"type": "many_choice", "question": "\u05de\u05d4\u05d5 \u05d4\u05e7\u05dc\u05d8 \u05d5\u05de\u05d4\u05d5 \u05d4\u05e4\u05dc\u05d8 \u05d1\u05d1\u05e2\u05d9\u05d4 \u05e9\u05e8\u05d0\u05d9\u05e0\u05d5 \u05d6\u05d5 \u05e2\u05ea\u05d4?", "answers": [{"answer": "\u05e7\u05dc\u05d8 - \u05db\u05dc \u05d4\u05d2\u05d5\u05e8\u05de\u05d9\u05dd \u05e9\u05dc \u05d4\u05de\u05e1\u05e4\u05e8. \u05e4\u05dc\u05d8 - \u05de\u05e1\u05e4\u05e8 \u05e9\u05dc\u05dd \u05d7\u05d9\u05d5\u05d1\u05d9", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05e7\u05dc\u05d8 - \u05d4\u05d2\u05d5\u05e8\u05dd \u05d4\u05e7\u05d8\u05df \u05d1\u05d9\u05d5\u05ea\u05e8 \u05d4\u05d2\u05d3\u05d5\u05dc \u05de-1 \u05e9\u05dc \u05d4\u05de\u05e1\u05e4\u05e8. \u05e4\u05dc\u05d8 - \u05de\u05e1\u05e4\u05e8 \u05e9\u05dc\u05dd \u05d7\u05d9\u05d5\u05d1\u05d9", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "\u05e7\u05dc\u05d8 - \u05de\u05e1\u05e4\u05e8 \u05e9\u05dc\u05dd \u05d7\u05d9\u05d5\u05d1\u05d9. \u05e4\u05dc\u05d8 - \u05d4\u05d2\u05d5\u05e8\u05dd \u05d4\u05e7\u05d8\u05df \u05d1\u05d9\u05d5\u05ea\u05e8 \u05d4\u05d2\u05d3\u05d5\u05dc \u05de-1 \u05e9\u05dc \u05d4\u05de\u05e1\u05e4\u05e8", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "\u05e7\u05dc\u05d8 - \u05de\u05e1\u05e4\u05e8 \u05e9\u05dc\u05dd \u05d7\u05d9\u05d5\u05d1\u05d9. \u05e4\u05dc\u05d8 - \u05db\u05dc \u05d4\u05d2\u05d5\u05e8\u05de\u05d9\u05dd \u05e9\u05dc \u05d4\u05de\u05e1\u05e4\u05e8", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}, {"type": "many_choice", "question": "\u05e2\u05d1\u05d5\u05e8 \u05d0\u05d9\u05d6\u05d4 \u05de\u05d4\u05e7\u05dc\u05d8\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05d4\u05d0\u05dc\u05d2\u05d5\u05e8\u05d9\u05ea\u05dd \u05d9\u05d1\u05e6\u05e2 \u05d0\u05d9\u05d8\u05e8\u05e6\u05d9\u05d4 \u05d0\u05d7\u05ea \u05d1\u05dc\u05d1\u05d3 \u05d5\u05d9\u05e1\u05d9\u05d9\u05dd?", "answers": [{"answer": "15", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "10", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "11", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "9", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("DxyjXxnbMTst")) {
    show_questions(questionsDxyjXxnbMTst, DxyjXxnbMTst);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
<section id="id16">
<h3>מציאת הגורם הראשוני המינימלי - תרגול פייתון<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p>בתרגול זה אתם מתבקשים לכתוב תוכנית למציאת הגורם הראשוני המינימלי של מספר שלם. הנה תזכורת לפסאודו-קוד של התוכנית שהוצג ביחידה על מספרים ראשוניים:</p>
<p>קלט: מספר שלם חיובי n</p>
<ol class="arabic simple">
<li><p>לכל k בין 2 לבין n:<br />
1.1. אם n מתחלק ב-k ללא שארית:<br />
1.1.1. החזר את k וסיים (k הוא הגורם הקטן ביותר של n)</p></li>
</ol>
<p>בחלונית הקודבורד שלפניכם תמצאו את כותרת הפונקציה <code class="docutils literal notranslate"><span class="pre">smallest_factor(n)</span></code>. הפונקציה מקבלת כקלט מספר שלם חיובי n. עליה להחזיר את k, המספר השלם הקטן ביותר בין 2 ו-n אשר מחלק את n ללא שארית.</p>
<p>זכרו - את השאלה האם n מתחלק ב-k ללא שארית ניתן לנסח ב”פייתונית” על ידי מציאת שארית החלוקה באמצעות <strong>במודולו / <code class="docutils literal notranslate"><span class="pre">%</span></code></strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">%</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>השוואה זו תחזיר True כאשר n מתחלק ב-k ללא שארית, ו-False אחרת.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">smallest_factor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># delete pass and fill in your code below</span>
    <span class="k">pass</span>


<span class="c1">### TESTS ###</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the smallest factor of 24&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">smallest_factor</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: 2 is the smallest factor of 24&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: 2 is the smallest factor of 24 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the smallest factor of 33&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">smallest_factor</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: 3 is the smallest factor of 33&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: 3 is the smallest factor of 33 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the smallest factor of 17&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">smallest_factor</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: 17 is the smallest factor of 17&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: 17 is the smallest factor of 17 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the smallest factor of 3476957&quot;</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">smallest_factor</span><span class="p">(</span><span class="mi">3476957</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ans</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: 11 is the smallest factor of 3476957&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: 11 is the smallest factor of 3476957 but the code returned&quot;</span><span class="p">,</span> <span class="n">ans</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking the smallest factor of 24
WRONG: 2 is the smallest factor of 24 but the code returned None
********************
Checking the smallest factor of 33
WRONG: 3 is the smallest factor of 33 but the code returned None
********************
Checking the smallest factor of 17
WRONG: 17 is the smallest factor of 17 but the code returned None
********************
Checking the smallest factor of 3476957
WRONG: 11 is the smallest factor of 3476957 but the code returned None
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
</section>
<section id="id17">
<h3>יעילות האלגוריתם למציאת הגורם הראשוני המינימלי<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p>נחזור לשאלת היעילות של האלגוריתם למציאת הגורם הראשוני המינימלי של מספר שלם. נתחיל בהערכת מספר האיטרציות הדרושות לאלגוריתם שראינו כדי למצוא גורם ראשוני מינימלי.</p>
<p><strong>פסאודו קוד: מציאת הגורם המינימלי</strong><br />
קלט: מספר שלם חיובי n</p>
<ol class="arabic simple">
<li><p>לכל k בין 2 לבין n:<br />
1.1 אם n מתחלק ב- k ללא שארית:<br />
1.1.1 החזר את k וסיים<br />
(k הוא הגורם הקטן ביותר של n)</p></li>
</ol>
<p><strong>מהו מספר האיטרציות המקסימלי האפשרי של האלגוריתם שבנינו למציאת הגורם הראשוני הקטן ביותר של מספר נתון?</strong></p>
<p>עבור מספר נתון n שאת ראשוניותו רוצים לבדוק, מספר האיטרציות הוא כמספר הערכים k בין 2 לבין n, כלומר n-1 איטרציות. כמובן, אם גילינו בשלב מוקדם יותר ש-n מתחלק ללא שארית בערך כלשהו של k, מספר האיטרציות בפועל יהיה קטן יותר.</p>
<p>אפשר ליעל את האלגוריתם שלנו ולעצור את ריצתו אחרי הרבה פחות מ-n-1 איטרציות. למעשה, <span class="math notranslate nohighlight">\(\sqrt(n)\)</span> איטרציות (קרי: שורש ריבועי של n) מספיקות.</p>
<p>איך ייתכן שאפשר לוותר על כל כך הרבה שלבי בדיקה מבלי להסתכן שנפספס את הגורם המינימלי?</p>
<p>הסתכלו למשל על המספר 100. שורש ריבועי של 100 זה המספר שכשנעלה אותו בריבוע נקבל 100, כלומר 10. יש שמונה מספרים בין 2 ל-100 (לא כולל) שמחלקים את 100. נרשום את כולם:</p>
<p>2, 4, 5, 10, 20, 25, 50</p>
<p>עכשיו, שימו לב לעובדה הבאה: ניתן להפריד את המחלקים של 100 לזוגות: לכל מחלק של 100 שגדול או שווה ל-10 אפשר להצמיד את אחד מהמחלקים שקטן או שווה 10, כך שמכפלת השניים תהיה שווה 100</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>תוצר הכפלה</p></th>
<th class="head"><p>מחלק קטן או שווה ל-10</p></th>
<th class="head"><p>מחלק גדול או שווה ל-10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p></p></td>
<td><p>2</p></td>
<td><p>50</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>4</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>5</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-odd"><td><p>100</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
</tr>
</tbody>
</table>
</div>
<p>מה כל זה אומר? זה אומר שלא יכול להיות שכל המחלקים של 100 גדולים משורשו הריבועי. במילים אחרות, חייב להיות גורם ראשוני של מאה שקטן או שווה לשורשו הריבועי. כי לכל אחד מהמחלקים של 100 שגדולים משורשו הריבועי יש “בן זוג” שקטן משורשו הריבועי. הדבר נכון לא רק למספר 100, אלא לכל מספר שלם חיובי! המסקנה היא שאם האלגוריתם שלנו ביצע לפחות <span class="math notranslate nohighlight">\(\sqrt(n)\)</span> איטרציות ולא החזיר מחלק, k, אפשר לעצור ולהחזיר n. להריץ <span class="math notranslate nohighlight">\(\sqrt(n)\)</span> איטרציות זה הרבה פחות מלהריץ n-1 איטרציות!
שימו לב כי ישנם מקרים בהם n−−√ איטרציות הן באמת מספר האיטרציות המינימלי הדרוש למציאת מחלק. למשל, עבור n=25, המחלק הקטן ביותר של 25 הוא 5, שהוא שורשו הריבועי. האם אתם יכולים לחשוב על ערכי n אחרים עבורם נצטרך <span class="math notranslate nohighlight">\(\sqrt(n)\)</span> איטרציות? מה משותף להם?</p>
<p>הסתכלו על האיור הבא:</p>
<img height=400 width=400 src='data:image/png;base64,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OY+e22r1p4lXHz2T53Hx4gS31cZYHG8caMWbB2PYWhdDm40w9raEbR7j7JIAbh6XixtMNJZH2+csalSxtyS1vgiIgAiIgAiIgAiIgAh8fgQkID8/9gN/ZIepOiza6o9/dO6cx6j5kD64HC1LHsLxtgBqmh38xUYZPzgcw14TjanOYeTcxJCNIubYiGJZFJhno4w3lkdwUbEFurHvOW8xINU48LbXEUVABERABERABERABESgHwhIQPYDxCGxC8fyK662PI8/fRHxDtFWzfsUxwpKUXfXIhy8cxnW7mrFSnNNra239Bqcx9hDoRbMtdyLBTZfscTSaZxfGMCVI3Mwb3QYYyNBy8/YLhp72I1+FgEREAEREAEREAEREAERGAIEJCCHgJH64xTd1avhvPQTxLdsgmMBaQ6HothVPB6fjp6CDV+5Hbvn3YDD65rgUlH2UEI2ulhkUVHHWrCbyfkBzLVIqRebaJxZFET+mXQaGmTsAaJ+FgEREAEREAEREAEREIEhSEACcggarben7Kxcidg//hiHdlVhU9lFqJg4G1snz8XuKReiccIMIJwLWDTV7gpHGceZUJxmIvG8giBmFIYwx0KljrO8jGHzWw0q8E13+PSbCIiACIiACIiACIiACAwLAhKQw8KMyS/i8Eer8NGv38Ino65AxRX3o7Z8KprGTALykqfn8PdWkGcuqSUhXGDLjIIQJplwnJQfQnFuAOaZqrmMybHrFxEQAREQAREQAREQAREYlgQkIIehWU/b3MV1lmrjrarj2HBgNA5f9G3EikYC0cJur5ZupwXmmnqxBb75gs1hnDkijLJIAKNsLmPUFKPcUrvFpx9FQAREQAREQAREQAREYNgTkIAcJiZmvJsdDQ5+X9OKv1nk1KONlp+xLQw3PAoYa0s3JWoi8ZryHNxsy4U22lhoiRjzmY/RIqrKM7UbcPpJBERABERABERABERABLKMgATkEDY4Y6SethyN/6e6Bb/b14aaE06ndBvJ5V/E3FCvKg9j/uQIrrHRRhUREAEREAEREAEREAEREAER6ImAlENPhAbR7xSMzTbUeLItjop6B6/vb8GqgzHEYj2cZKwVobiDwpICXDQyhFvG5+I6E43FOckFZg971M8iIAIiIAIiIAIiIAIiIAJZSEACcggY3TXlWNvsYq+5pa6ua8PbB9tQe9KF213g1Fgb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REAEREAEREAERKBXBLJWQDqW6NkbedyxBRav+Cy05mAItV/9Blq/uwAByxWlIgIiIAIiIAIiIAIiIAIiIAIi0E4g+wSkiUW3ogLu88+2jzx2EI+tJh7XnDcLG75wPeKWC0dFBERABERABERABERABERABETgMwLZNQfScj1SPDovvYj45k8S7oN4bgQ1V12HNTNnYaYlRVcRAREQAREQAREQAREQAREQARFIJJA9I5CW59ETj//0MuLrViZS4JzHu+5F/YMPwZF4VB0RAREQAREQAREQAREQAREQgS4JZI2AdCsr4fz0JcRXfZgw5xHM87joAYSffQ7x3NwuIelLERABERABERABERABERABERABICtcWL08jz80gbhpfaLNO+R5dCQeVR9EQAREQAREQAREQAREQAREoFsCw15Appzn0eZHqoiACIiACIiACIiACIiACIiACCQnMKwFpLtxY3ueR6bq6FiiBQg+sEx5HpPfF/pFBERABERABERABERABERABM4hMGwFpBcw59lnzsnzCAuYE1y4GOEHHgQKCs4Boi9EQAREQAREQAREQAREQAREQAS6JjD8BCTzPG7ZAodzHrduTrxqS9URvOd7CD/xJKA5j13fEfpWBERABERABERABERABERABJIQGF4C0s/zyGirG9clXjJHHi1VR/iZFRKPSW4GfS0CIiACIiACIiACIiACIiAC3REYPgKyY57HtR8nXjPFI0ceKR4jke546DcREAEREAEREAEREAEREAEREIEkBIaNgIwfPw7nP/+s6zyPC5fIbTXJDaCvRUAEREAEREAEREAEREAERCBVAkNGQMZtbmN3xbURSCcYQsBW4uIVP8/jQ0sRz8kBethHMBhEjq0XCoW8zXs65pmj6EMEREAEhg0BPvcaGhoQi8WQn59vThsRBAJnn6rD5jp1ISIgAiIgApkl0NLSgsbGRu/dmu2J/36d6lHV9qRKauDXC9jLQvfKbODPqcsj9niaNv/R2b4d7r/+C/DenxHPiyL04HIvVQeKi7vcZ8cvuf/6+nocPXoUhYWFGDNmTK9v9B4PohVEQAREYJAT4LOQjT475djoc1ERAREQAREQgd4SYEdka2ur9z6da8EreysIe7t+b89P66dPYMgIyJQukfMgq3Yh9sorCEyYiPCCBQiUlKS0qVYSAREQAREQAREQAREQAREQARHonsDwEpC8Vg6oWm8HzB3Vus67v3r9KgIiIAIiIAIiIAIiIAIiIAIikDKB/w+tXFusVl0EhQAAAABJRU5ErkJggg==' /><p>הקו האדום מייצג את הערך של הביטוי n−1 עבור ערכים שונים של n. למשל, עבור n = 16, הערך של ביטוי זה, הוא 15. הקו הכחול מייצג את הביטוי <span class="math notranslate nohighlight">\(\sqrt(n)\)</span>, ועבור n=16, ערך הביטוי הוא 4. ההפרש בין שני ערכים אלו הוא 11. לעומת זאת, עבור n=36, למשל, ההפרש גדל עוד יותר, והוא עומד על 29. ההבדל נעשה דרמטי יותר ככל ש-n הוא מספר גדול יותר. חישבו למשל על הערכים שהיו מתקבלים עבור n=10**6. <strong>איור זה ממחיש שהעובדה שהצלחנו לצמצם את מספר האיטרציות מ-n−1 ל-<span class="math notranslate nohighlight">\(\sqrt(n)\)</span> היא שיפור משמעותי ביעילות האלגוריתם.</strong></p>
<p>לעומת זאת, עבור מספרים גדולים שמכילים כמה מאות ספרות עשרוניות, לאלגוריתם שלנו ידרש זמן רב מדיי להשלמתו (וגם לאלגוריתם המשופר שתחת החדשות הטובות). הכוונה היא לא לחמש דקות או שעתיים, אלא לסדר גודל של מליארדי שנים! יש אמנם אלגוריתמים אחרים, מסובכים, מתוחכמים, יעילים יותר, למציאת גורמים של מספר. אבל גם אלה אינם יכולים למצוא ביעילות גורמים של מספרים גדולים.</p>
</section>
<section id="id18">
<h3>סיכום פתרון בעיות פולינדום ומציאת מספרים ראשוניים<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<p>בואו נסכם את מה שראינו ביחידה הזו. הדגמנו שימוש בלולאת while כדי לזהות אם מחרוזת היא פלינדרום, ובלולאת for כדי למצוא גורם ראשוני מינימלי של מספר שלם חיובי. בשני המקרים הדגמנו מהלך שלם של פתרון בעיה חישובית – החל בהגדרת הבעיה, דרך ניסוח האלגוריתם במונחים של פסאודו-קוד, ועד מימוש האלגוריתם בפייתון. בנוסף, דנו ביעילותם של אלגוריתמים, נושא שאליו נחזור שוב בהמשך השיעור, וגם בשיעורים הבאים. כאמור, זה נושא מרכזי ביותר במדעי המחשב.</p>
</section>
<section id="id19">
<h3>לולאות מקוננות<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<p>בדומה למשפטי תנאי מקוננים אותם פגשנו, כאן מדובר על לולאה שנמצאת בתוך לולאה אחרת. אם יש שתי לולאות כאלו אחת בתוך השנייה, אז לולאה אחת היא לולאה חיצונית וזו שבתוכה תיקרא לולאה פנימית.</p>
<p>מה שמיוחד במצב הזה הוא, שהלולאה הפנימית תתבצע בעצמה פעמים רבות. כלומר בכל איטרציה של הלולאה החיצונית, הלולאה הפנימית תתחיל להתבצע מחדש.</p>
<p>נתחיל בשאלת הכנה.</p>
<p>מה מדפיס הקוד הבא:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">1</span>  
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="bebOjLotHkDZ" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#bebOjLotHkDZ {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsbebOjLotHkDZ=[{"type": "many_choice", "question": "\u05de\u05d4 \u05de\u05d3\u05e4\u05d9\u05e1 \u05d4\u05e7\u05d5\u05d3 \u05d4\u05d1\u05d0?", "answers": [{"answer": "5 0", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "0 5", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "0 0", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "4 5", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("bebOjLotHkDZ")) {
    show_questions(questionsbebOjLotHkDZ, bebOjLotHkDZ);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>שימו לב להזחות - ההגדלה של a ב-1 מוזחת ולכן הקוד הזה מתבצע בתוך הלולאה - בסך הכל 5 פעמים - ולכן ערכו של a הוא 5. לעומת זאת, ההקטנה של b ב-1 אינה מוזחת, ולכן היא לא חלק מהלולאה. כתוצאה מכך, b קטן ב-1 רק פעם אחת (לאחר סיום ביצוע הלולאה), ולכן ערכו של b בסיום הריצה הוא 4. נציין כי אם b כן היה מוזח אל תוך הלולאה, ערכו הסופי היה 0 (חישבו למה!), ובמקרה זה ההדפסה היתה “0 5”.</p>
<p><strong>לולאות מקוננות</strong> הן שתיים או יותר לולאות הנמצאות אחת בגוף של השניה. לדוגמא:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
 <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
 <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i =&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="s2">&quot;, j =&quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>כאן הלולאה החיצונית משתמשת במשתנה i ואילו הלולאה הפנימית משתמשת במשתנה j.
בכל איטרציה של הלולאה החיצונית, מתבצעת הלולאה הפנימית במלואה.
מועיל לחשוב על הלולאה הפנימית כעל פקודה שנמצאת בתוך הלולאה החיצונית, ומתבצעת בכל איטרציה
מחדש. למשל, באיטרציה החיצונית הראשונה, בה 0=i, תתבצע הלולאה הפנימית ו- j ירוץ מ- 0 ועד .10 כך יקרה
בכל איטרציה חיצונית בהמשך.</p>
<p>בדוגמה השתמשנו רק בלולאות for, אך ניתן כמובן להשתמש בלולאות מקוננות גם עם לולאות while, וכן
לשלב בין לולאת for ולולאת while.</p>
<p>השימוש בלולאות מקוננות לא שונה מהותית משימוש בלולאות רגילות, <strong>אך יש לשים דגש מיוחד על
ההזחות</strong>. כדי שהלולאה הפנימית תהיה חלק מגוף הלולאה החיצונית, עלינו להזיח אותה ימינה.</p>
<p>צפו כעת ברחבה על הדוגמא שהצגנו ללולאות מקוננות:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/2UGFIpS2ljU?si=Pzf97U04tci93Xmq" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p><strong>לנוחיותכם חלונית עם הקוד שראינו בסרטון. מוזמנים להריץ בעצמכם:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">all_pairs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i =&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;, j =&quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

<span class="n">all_pairs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i = 1 , j = 1
i = 1 , j = 2
i = 1 , j = 3
i = 2 , j = 1
i = 2 , j = 2
i = 2 , j = 3
i = 3 , j = 1
i = 3 , j = 2
i = 3 , j = 3
</pre></div>
</div>
</div>
</div>
<p><strong>בחנו את עצמכם</strong></p>
<p>התבוננו בקטע הקוד הבא:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="JGkPQbsGoEcc" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#JGkPQbsGoEcc {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsJGkPQbsGoEcc=[{"type": "many_choice", "question": "\u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05de\u05ea\u05d1\u05e6\u05e2\u05ea \u05e7\u05e8\u05d9\u05d0\u05d4 \u05dc\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 do_something?", "answers": [{"answer": "3", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "7", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "10", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "21", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("JGkPQbsGoEcc")) {
    show_questions(questionsJGkPQbsGoEcc, JGkPQbsGoEcc);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<p>התבוננו בקטע הקוד הבא:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">i</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="JMWeOLTPArNP" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#JMWeOLTPArNP {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsJMWeOLTPArNP=[{"type": "many_choice", "question": "\u05de\u05d4 \u05d9\u05d4\u05d9\u05d4 \u05e2\u05e8\u05db\u05d5 \u05e9\u05dc n \u05d1\u05e1\u05d5\u05e3 \u05e8\u05d9\u05e6\u05ea \u05d4\u05ea\u05d5\u05db\u05e0\u05d9\u05ea?", "answers": [{"answer": "5", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "50", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "51", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "60", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("JMWeOLTPArNP")) {
    show_questions(questionsJMWeOLTPArNP, JMWeOLTPArNP);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
<section id="id20">
<h3>תרגול<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<p>בתרגיל זה עליכם לממש את הפונקציה <code class="docutils literal notranslate"><span class="pre">all_pairs_sum</span></code> שכותרתה מופיעה בחלונית הקוד. זוהי גרסה מעט שונה של הפונקציה all_pairs שאותה הצגנו בסרטון.</p>
<p>הפונקציה <code class="docutils literal notranslate"><span class="pre">all_pairs_sum</span></code> מקבלת כקלט שני מספרים שלמים וחיוביים - m ו-n. הפונקציה צריכה להחזיר את סכום המכפלות של כל הזוגות של המספרים בהם האיבר הראשון הוא בין 1 ל-m והאיבר השני הוא בין 1 ל-n. בניגוד לפונקציה מהסרטון, פונקציה זו לא צריכה להדפיס שום דבר (אך ניתן כמובן להוסיף הדפסות עזר בעת כתיבת הפתרון).</p>
<p>דוגמה:</p>
<p>נניח כי m=2 ו-n=3. עבור ערכים אלו, נציג תחילה את כל הזוגות בהם המספר הראשון (השמאלי) הוא בין 1 ל-m (כלומר, בין 1 ל-2) והמספר השני (הימני) בין 1 ל-n (כלומר, בין 1 ל-3). כל זוג כזה יופיע בתוך סוגריים עגולים:
$<span class="math notranslate nohighlight">\(
(1,1), (1,2), (1,3), (2,1), (2,2), (2,3)
\)</span>$</p>
<p>עבור ערכים אלו של m ו-n, הפונקציה תחזיר את סכום המכפלות של הזוגות האלו, כלומר, את המספר 18:
$<span class="math notranslate nohighlight">\(
1*1 + 1*2 + 1*3 + 2*1 + 2*2 + 2*3 = 1 + 2 + 3 + 2 + 4 + 6 = 18
\)</span>$</p>
<p><strong>רמז:</strong> ניתן להשתמש בקוד של הפונקציה all_pairs ולערוך אותו מעט. הוסיפו משתנה אשר אליו תוסיפו בכל פעם את המכפלה שעליה אתם עוברים בתוך הלולאות המקוננות (חישבו היכן וכיצד לאתחל משתנה זה).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">all_pairs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">all_pairs_sum</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># Write your solution here</span>
    <span class="k">pass</span>
    
    

<span class="c1">### TESTS ###</span>
<span class="n">tests</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span>
<span class="n">sols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tests</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the current values: m =&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="s2">&quot;, n =&quot;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">all_pairs_sum</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="n">sols</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CORRECT: The sum of all pairs is&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WRONG: Your answer is:&quot;</span><span class="p">,</span> <span class="n">res</span> <span class="p">,</span><span class="s2">&quot;, but the correct answer is:&quot;</span><span class="p">,</span> <span class="n">sols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking the current values: m = 1 , n = 1
WRONG: Your answer is: None , but the correct answer is: 18
********************
Checking the current values: m = 2 , n = 3
WRONG: Your answer is: None , but the correct answer is: 1260
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
<p>בתרגיל זה עליכם לממש את הפונקציה print_rectangle שמופיעה בחלונית הקוד. הפונקציה מקבלת כקלט שני מספרים שלמים - height (גובה) ו-width (רוחב). על הפונקציה להדפיס מלבן של סולמיות (#) בגובה וברוחב הנתונים. בכל שורה הסולמיות מופרדות ברווח (ראו דוגמאות בהמשך). הפונקציה לא מחזירה דבר.</p>
<p>דוגמאות הרצה:</p>
<p>הרצה של print_rectangle(1,1)‎ תדפיס סולמית בודדת.
הרצה של print_rectangle(3,5)‎ תדפיס:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># # # # #</span>
<span class="c1"># # # # #</span>
<span class="c1"># # # # #</span>
</pre></div>
</div>
<p><strong>הנחיות:</strong></p>
<ul class="simple">
<li><p>ניתן להניח כי הקלטים תמיד יהיו מספרים שלמים וחיוביים (כלומר, גדולים מ-0).</p></li>
<li><p>שימו לב לסדר הקלטים שהפונקציה מקבלת - הגובה הוא הקלט הראשון מבין השניים.</p></li>
<li><p>כפי שאתם ודאי מבינים, יש צורך להשתמש כאן בלולאות מקוננות.</p></li>
<li><p>על מנת להדפיס סולמית ללא ירידת שורה, השתמשו בפקודה print(“#”, end=” “)‎. פקודה זו תדפיס סולמית ואחריה רווח, ללא ירידת שורה.</p></li>
<li><p>שימו לב שבסוף כל שורה במלבן אתם כן צריכים לרדת שורה. תוכלו לעשות זאת על ידי הדפסת מחרוזת ריקה - print(“”)‎</p></li>
</ul>
<p>לאחר שסיימתם את כתיבת הקוד, הריצו אותו ובדקו את התוצאות בחלונית הפלט.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">print_rectangle</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
    <span class="c1"># Write your solution here</span>
    <span class="k">pass</span>
    
    
    
    
    
    
    
    
<span class="c1">### TESTS ###</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the test:&quot;</span><span class="p">)</span>
<span class="n">sols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="s1">&#39;# # # # #</span><span class="se">\n</span><span class="s1"># # # # #</span><span class="se">\n</span><span class="s1"># # # # #&#39;</span><span class="p">]</span>
<span class="n">tests</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tests</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking the current values: height =&quot;</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="s2">&quot;, width =&quot;</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Your solution:&quot;</span><span class="p">)</span>
    <span class="n">print_rectangle</span><span class="p">(</span><span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The correct solution:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tests concluded, add more tests of your own below!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>********************
Starting the test:
********************
Checking the current values: height = 1 , width = 1
Your solution:
---------------
The correct solution:
#
********************
Checking the current values: height = 3 , width = 5
Your solution:
---------------
The correct solution:
# # # # #
# # # # #
# # # # #
********************
Tests concluded, add more tests of your own below!
********************
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="for-while-n">
<h2>דוגמה מסכמת להבדל במימושים בין <code class="docutils literal notranslate"><span class="pre">for</span></code> ו<code class="docutils literal notranslate"><span class="pre">while</span></code>: עצרת (n!)<a class="headerlink" href="#for-while-n" title="Link to this heading">#</a></h2>
<section id="id21">
<h3>הגדרת עצרת:<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<p><span class="math notranslate nohighlight">\(1\cdot2\cdot3=3!\)</span></p>
<p><span class="math notranslate nohighlight">\(1\cdot2\cdot3\cdot4\cdot5\cdot6=6!\)</span></p>
<p><span class="math notranslate nohighlight">\(1\cdot2\cdot\dots\cdot)𝑛−1( \cdot 𝑛=𝑛!\)</span></p>
</section>
<section id="id22">
<h3>מימוש עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code><a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># factorial implementation with &quot;while&quot; loop</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">7</span>

<span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="n">fact</span> <span class="o">*</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;!=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fact</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7!=5040
</pre></div>
</div>
</div>
</div>
</section>
<section id="id23">
<h3>עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code><a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<p>תזכורת:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="n">fact</span> <span class="o">*</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>בואו נעשה את זה עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span>  <span class="o">=</span> <span class="mi">7</span>

<span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="n">fact</span> <span class="o">*</span> <span class="n">i</span>

<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s2">&quot;! =&quot;</span><span class="p">,</span> <span class="n">fact</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fact</span> <span class="pre">*=</span> <span class="pre">i</span></code> שקול ל־ <code class="docutils literal notranslate"><span class="pre">fact</span> <span class="pre">=</span> <span class="pre">fact</span> <span class="pre">*</span> <span class="pre">i</span></code></p>
</section>
<section id="id24">
<h3>עצרת עם <code class="docutils literal notranslate"><span class="pre">for</span></code> ו־פונקציה<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">fact</span> <span class="o">*=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">fact</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;5!+3!+6! =&quot;</span><span class="p">,</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>הימנעות מקוד כפול</p>
<ul class="simple">
<li><p>n, fact ו־i הם משתנים מקומיים של הפונקציה</p>
<ul>
<li><p>קיימים רק בגבולות הפונקציה ונעלמים בסופה</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="break-continue">
<h2><code class="docutils literal notranslate"><span class="pre">break</span></code> ו <code class="docutils literal notranslate"><span class="pre">continue</span></code><a class="headerlink" href="#break-continue" title="Link to this heading">#</a></h2>
<section id="break">
<h3>מילת המפתח <code class="docutils literal notranslate"><span class="pre">break</span></code><a class="headerlink" href="#break" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">break</span></code> יוצאת מהלולאה הקרובה ביותר באופן מיידי</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">elem</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First negative number is&quot;</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;current number is: &quot;</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="break-for">
<h3>דוגמה: שימוש ב־ <code class="docutils literal notranslate"><span class="pre">break</span></code> בלולאת <code class="docutils literal notranslate"><span class="pre">for</span></code> למציאת המחלק הראשוני הקטן ביותר<a class="headerlink" href="#break-for" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">=</span><span class="mi">25</span>
<span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span> <span class="c1"># Note the +1!</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">div</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">break</span>
<span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">div</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s2">&quot;is not prime&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s2">&quot;is prime&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="continue">
<h3>מילת המפתח <code class="docutils literal notranslate"><span class="pre">continue</span></code><a class="headerlink" href="#continue" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">continue</span></code> מדלגת על שאר האיטרציה הנוכחית ועוברת לבאה</p></li>
</ul>
</section>
<section id="id25">
<h3>דוגמה ל־ <code class="docutils literal notranslate"><span class="pre">continue</span></code><a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<p>נתונה רשימה, החזר רשימה חדשה של איברים ייחודיים בלבד</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">unique_list</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">uniques</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span> 
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">uniques</span><span class="p">:</span> 
            <span class="k">continue</span> 
        <span class="n">uniques</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">uniques</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">unique_list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id26">
<h1>מבוא לסיבוכיות<a class="headerlink" href="#id26" title="Link to this heading">#</a></h1>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/HPIkxZCgGZA?si=M534uKSxEbBgkOj_" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<section id="id27">
<h2>כיצד מודדים את כמות הפעולות באלגוריתם?<a class="headerlink" href="#id27" title="Link to this heading">#</a></h2>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/fT9NZSQ0pt8?si=X6Namz9Fj-QQyYs-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p>הסתכלו על הלולאה המקוננת הבאה:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>ולולאה זו מבצעת 10X10 = 100 איטרציות בסה”כ.</p>
<p>כמה איטרציות היא תבצע אם נגדיל את n פי 2, מ-10 ל-20?</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="AkhviwGlcufV" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#AkhviwGlcufV {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsAkhviwGlcufV=[{"question": "\u05db\u05de\u05d4 \u05d0\u05d9\u05d8\u05e8\u05e6\u05d9\u05d5\u05ea \u05ea\u05d5\u05d3\u05e4\u05e1\u05e0\u05d4 \u05d0\u05dd \u05e0\u05d2\u05d3\u05d9\u05dc \u05d0\u05ea n \u05de-10 \u05dc-20?", "type": "numeric", "answers": [{"type": "value", "value": 400, "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("AkhviwGlcufV")) {
    show_questions(questionsAkhviwGlcufV, AkhviwGlcufV);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
</section>
<section id="id28">
<h2>סיבוכיות ומדידת זמנים<a class="headerlink" href="#id28" title="Link to this heading">#</a></h2>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/HUqsZ1xvNI0?si=GgC6uhhW6xXzDm1l" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
<p><strong>לנוחיותכם חלונית עם הקוד שראינו בסרטון. מוזמנים להריץ בעצמכם:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">f1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span><span class="w"> </span><span class="nf">f2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">f2</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n = 1000, measured time: </span><span class="si">{</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">f2</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n = 2000, measured time: </span><span class="si">{</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">f2</span><span class="p">(</span><span class="mi">4000</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n = 4000, measured time: </span><span class="si">{</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>n = 1000, measured time: 0.07
n = 2000, measured time: 0.29
n = 4000, measured time: 1.21
</pre></div>
</div>
</div>
</div>
<section id="id29">
<h3>סיכום מדידת זמנים<a class="headerlink" href="#id29" title="Link to this heading">#</a></h3>
<p>בסרטון לעיל הצגנו 2 מחלקות סיבוכיות זמן:</p>
<ol class="arabic simple">
<li><p>סיבוכיות זמן לינארית - בתוכניות ממחלקה זו הכפלת גודל הקלט בגורם מסוים תגרום
להכפלה באותו הגורם של זמן הריצה, למשל – קלט גדול פי 3 יגרום לזמן ריצה גדול פי 3 בערך.
פונקציה לדוגמה ממחלקה זו - הפונקציה <code class="docutils literal notranslate"><span class="pre">f1</span></code> בה השתמשנו בלולאת for יחידה בעלת n איטרציות:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">f1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
 <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
 <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
 <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>סיבוכיות זמן ריבועית - בתוכניות ממחלקה זו הכפלת גודל הקלט בגורם מסוים תגרום
להכפלה של זמן הריצה באותו גורם בריבוע, למשל – קלט גדול פי 3 יגרום לזמן ריצה גדול
פי 9 בערך. פונקציה לדוגמה ממחלקה זו - הפונקציה <code class="docutils literal notranslate"><span class="pre">f2</span></code> שבה השתמשנו בלולאות for
מקוננות - לולאה פנימית ולולאה חיצונית, כל אחת מהן בעלת n איטרציות:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">f2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
 <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
 <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
 <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span>
 <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>הכרנו כלי מעשי - קוד המאפשר לנו למדוד זמני ריצה באמצעות הפונקציה <code class="docutils literal notranslate"><span class="pre">perf_counter</span></code> מהספריה <code class="docutils literal notranslate"><span class="pre">time</span></code>.
בקטע זה שומרים את זמן ההתחלה וזמן הסיום של קטע הקוד שאת זמן הריצה שלו מודדים, ומדפיסים את
ההפרש ביניהם:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="n">start</span> <span class="o">=</span>  <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> 
<span class="p">(</span><span class="n">Code</span> <span class="n">to</span> <span class="n">measure</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span>  <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> 
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;measured time:&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id30">
<h3>בחנו את עצמכם<a class="headerlink" href="#id30" title="Link to this heading">#</a></h3>
<p>לפניכם מוצגות מספר פונקציות המקבלות כקלט מספר או שני מספרים שלמים. הפונקציות משתמשות בפונקציה הדמיונית <code class="docutils literal notranslate"><span class="pre">do_something</span></code> שזמן הריצה שלה הוא תמיד שניה אחת בדיוק.</p>
<p>עבור כל פונקציה כתבו מהו זמן הריצה שלה (בשניות), כתלות בגודל הקלט.</p>
<p>הבהרה: הניחו כי כל שאר הפעולות שהפונקציה מבצעת - כגון עדכון המשתנה בלולאה - לוקחות זמן זניח וניתן להתעלם מהן בחישוב זמן הריצה.</p>
<ol class="arabic simple">
<li></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">()</span>    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="BTBfXsLOLtWS" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#BTBfXsLOLtWS {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsBTBfXsLOLtWS=[{"question": "\u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05ea\u05d1\u05d5\u05e6\u05e2 \u05d4\u05e7\u05e8\u05d9\u05d0\u05d4 \u05dc\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 do_something \u05d1\u05e7\u05d5\u05d3 \u05d4\u05d1\u05d0?", "type": "many_choice", "answers": [{"answer": "n", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "n+1", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "n+2", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "n+3", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("BTBfXsLOLtWS")) {
    show_questions(questionsBTBfXsLOLtWS, BTBfXsLOLtWS);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<ol class="arabic simple" start="2">
<li></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="whaGKLeILlhh" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#whaGKLeILlhh {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionswhaGKLeILlhh=[{"question": "\u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05ea\u05d1\u05d5\u05e6\u05e2 \u05d4\u05e7\u05e8\u05d9\u05d0\u05d4 \u05dc\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 do_something \u05d1\u05e7\u05d5\u05d3 \u05d4\u05d1\u05d0?", "type": "many_choice", "answers": [{"answer": "m", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "n", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "m+n", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}, {"answer": "m*n", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("whaGKLeILlhh")) {
    show_questions(questionswhaGKLeILlhh, whaGKLeILlhh);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<ol class="arabic simple" start="3">
<li></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">func3</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="nQWqLhDtkaKY" data-shufflequestions="False" data-shuffleanswers="True" data-preserveresponses="false" data-numquestions="1000000" data-maxwidth="600" style="border-radius: 10px; text-align: left"><style>
#nQWqLhDtkaKY {
   --jq-multiple-choice-bg: #6f78ffff;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #f75c03ff;
   --jq-numeric-bg: #392061ff;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-string-bg: #4c1a57;
   --jq-incorrect-color: #c80202;
   --jq-correct-color: #009113;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: unset;
    min-width: 140px;
    max-width: 93%;
    field-sizing: content;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.StringQn {
    background: var(--jq-string-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.StringQn p {
    color: inherit;
}


.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsnQWqLhDtkaKY=[{"question": "\u05db\u05de\u05d4 \u05e4\u05e2\u05de\u05d9\u05dd \u05ea\u05d1\u05d5\u05e6\u05e2 \u05d4\u05e7\u05e8\u05d9\u05d0\u05d4 \u05dc\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4 do_something \u05d1\u05e7\u05d5\u05d3 \u05d4\u05d1\u05d0?", "type": "many_choice", "answers": [{"answer": "m", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "n", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "m+n", "correct": false, "feedback": "\u05dc\u05d0 \u05e0\u05db\u05d5\u05df"}, {"answer": "m*n", "correct": true, "feedback": "\u05e0\u05db\u05d5\u05df!"}]}];

if (typeof Question === 'undefined') {
// Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}
// Convert LaTeX delimiters and markdown links to HTML
function jaxify(string) {
    let mystring = string;
    let count = 0, count2 = 0;
    let loc = mystring.search(/([^\\]|^)(\$)/);
    let loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    while (loc >= 0 || loc2 >= 0) {
        if (loc2 >= 0) {
            mystring = mystring.replace(/([^\\]|^)(\$\$)/, count2 % 2 ? '$1\\]' : '$1\\[');
            count2++;
        } else {
            mystring = mystring.replace(/([^\\]|^)(\$)/, count % 2 ? '$1\\)' : '$1\\(');
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
    }
    // Replace markdown links
    mystring = mystring.replace(/<http(.*?)>/g, '<a href="http$1" target="_blank" class="Link">http$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" class="Link">$1</a>');
    return mystring;
}

// Base class for question types
class Question {
    static registry = {};
    static register(type, cls) {
        Question.registry[type] = cls;
    }
    static create(qa, id, index, options, rootDiv) {
        const Cls = Question.registry[qa.type];
        if (!Cls) {
            console.error(`No question class registered for type "${qa.type}"`);
            return;
        }
        const q = new Cls(qa, id, index, options, rootDiv);
        q.render();
    }

    constructor(qa, id, index, options, rootDiv) {
        this.qa = qa;
        this.id = id;
        this.index = index;
        this.options = options;
        this.rootDiv = rootDiv;
        // wrapper
        this.wrapper = document.createElement('div');
        this.wrapper.id = `quizWrap${id}`;
        this.wrapper.className = 'Quiz';
        this.wrapper.dataset.qnum = index;
        this.wrapper.style.maxWidth = `${options.maxWidth}px`;
        rootDiv.appendChild(this.wrapper);
        // question container
        this.outerqDiv = document.createElement('div');
        this.outerqDiv.id = `OuterquizQn${id}${index}`;
        this.wrapper.appendChild(this.outerqDiv);
        // question text
        this.qDiv = document.createElement('div');
        this.qDiv.id = `quizQn${id}${index}`;
        if (qa.question) {
            this.qDiv.innerHTML = jaxify(qa.question);
            this.outerqDiv.appendChild(this.qDiv);
        }
        // code block
        if (qa.code) {
            const codeDiv = document.createElement('div');
            codeDiv.id = `code${id}${index}`;
            codeDiv.className = 'QuizCode';
            const pre = document.createElement('pre');
            const codeEl = document.createElement('code');
            codeEl.innerHTML = qa.code;
            pre.appendChild(codeEl);
            codeDiv.appendChild(pre);
            this.outerqDiv.appendChild(codeDiv);
        }
        // answer container
        this.aDiv = document.createElement('div');
        this.aDiv.id = `quizAns${id}${index}`;
        this.aDiv.className = 'Answer';
        this.wrapper.appendChild(this.aDiv);
        // feedback container (append after answers)
        this.fbDiv = document.createElement('div');
        this.fbDiv.id = `fb${id}`;
        this.fbDiv.className = 'Feedback';
        this.fbDiv.dataset.answeredcorrect = 0;
    }

    render() {
        throw new Error('render() not implemented');
    }

    preserveResponse(val) {
        if (!this.options.preserveResponses) return;
        const resp = document.getElementById(`responses${this.rootDiv.id}`);
        if (!resp) return;
        const arr = JSON.parse(resp.dataset.responses);
        arr[this.index] = val;
        resp.dataset.responses = JSON.stringify(arr);
        printResponses(resp);
    }

    typeset(container) {
        if (typeof MathJax !== 'undefined') {
            const v = MathJax.version;
            if (v[0] === '2') {
                MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
            } else {
                MathJax.typeset([container]);
            }
        }
    }
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == true) {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
// Object-oriented wrapper for MC/MANY choice
class MCQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) { super(qa, id, idx, opts, rootDiv); }
    render() {
        //console.log("options.shuffleAnswers " + this.options.shuffleAnswers);
        const numCorrect = make_mc(
            this.qa,
            this.options.shuffleAnswers,
            this.outerqDiv,
            this.qDiv,
            this.aDiv,
            this.id
        );
        if ('answer_cols' in this.qa) {
            this.aDiv.style.gridTemplateColumns =
                'repeat(' + this.qa.answer_cols + ', 1fr)';
        }
        this.fbDiv.dataset.numcorrect = numCorrect;
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('multiple_choice', MCQuestion);
Question.register('many_choice', MCQuestion);
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                var value;
                if ("precision" in ths.dataset) {
                    value = answer.value.toPrecision(ths.dataset.precision);
                } else {
                    value = answer.value;
                }
                if (submission == value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }

                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            // find the current question wrapper
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        console.log(height);
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }

}
// Object-oriented wrapper for numeric questions
class NumericQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_numeric(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('numeric', NumericQuestion);

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
// Override show_questions to use object-oriented Question API
function show_questions(json, container) {
    // Accept container element or element ID
    if (typeof container === 'string') {
        container = document.getElementById(container);
    }
    if (!container) {
        console.error('show_questions: invalid container', container);
        return;
    }

    const shuffleQuestions = container.dataset.shufflequestions === 'True';
    const shuffleAnswers = container.dataset.shuffleanswers === 'True';
    const preserveResponses = container.dataset.preserveresponses === 'true';
    const maxWidth = parseInt(container.dataset.maxwidth, 10) || 0;
    let numQuestions = parseInt(container.dataset.numquestions, 10) || json.length;
    if (numQuestions > json.length) numQuestions = json.length;

    let questions = json;
    if (shuffleQuestions || numQuestions < json.length) {
        questions = getRandomSubarray(json, numQuestions);
    }

    questions.forEach((qa, index) => {
        const id = makeid(8);
        const options = {
            shuffleAnswers: shuffleAnswers,
            preserveResponses: preserveResponses,
            maxWidth: maxWidth
        };
        Question.create(qa, id, index, options, container);
    });

    if (preserveResponses) {
        const respDiv = document.createElement('div');
        respDiv.id = 'responses' + container.id;
        respDiv.className = 'JCResponses';
        respDiv.dataset.responses = JSON.stringify([]);
        respDiv.innerHTML = '<b>Select your answers and then follow the directions that will appear here.</b>';
        container.appendChild(respDiv);
    }

    // Trigger MathJax typesetting if available
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([container]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }
    // if (typeof MathJax !== 'undefined') {
    //     const v = MathJax.version;
    //     if (v[0] === '2') {
    //         MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    //     } else if (v[0] === '3') {
    //         MathJax.typeset([container]);
    //     }
    // }

    // Prevent link clicks from bubbling up
    Array.from(container.getElementsByClassName('Link')).forEach(link => {
        link.addEventListener('click', e => e.stopPropagation());
    });
}
function levenshteinDistance(a, b) {
    if (a.length === 0) return b.length;
    if (b.length === 0) return a.length;

    const matrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));

    for (let i = 0; i <= a.length; i++) {
        matrix[0][i] = i;
    }

    for (let j = 0; j <= b.length; j++) {
        matrix[j][0] = j;
    }

    for (let j = 1; j <= b.length; j++) {
        for (let i = 1; i <= a.length; i++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[j][i] = Math.min(
                matrix[j - 1][i] + 1, // Deletion
                matrix[j][i - 1] + 1, // Insertion
                matrix[j - 1][i - 1] + cost // Substitution
            );
        }
    }
    return matrix[b.length][a.length];
}
// Object-oriented wrapper for string input questions
class StringQuestion extends Question {
    constructor(qa, id, idx, opts, rootDiv) {
        super(qa, id, idx, opts, rootDiv);
    }
    render() {
        make_string(this.qa, this.outerqDiv, this.qDiv, this.aDiv, this.id);
        this.wrapper.appendChild(this.fbDiv);
    }
}
Question.register('string', StringQuestion);

function check_string(ths, event) {
    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];
        var submission = ths.value.trim();
        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;

        // Handle default answer pattern: filter out and capture default feedback
        var filteredAnswers = [];
        answers.forEach(answer => {
            if (answer.type === "default") {
                defaultFB = answer.feedback;
            } else {
                filteredAnswers.push(answer);
            }
        });
        answers = filteredAnswers;

        answers.every(answer => {
            correct = false;

            let match = false;
            if (answer.match_case) {
                match = submission === answer.answer;
            } else {
                match = submission.toLowerCase() === answer.answer.toLowerCase();
            }
            console.log(submission);
            console.log(answer.answer);
            console.log(match);

            if (match) {
                if ("feedback" in answer) {
                    fb.innerHTML = jaxify(answer.feedback);
                } else {
                    fb.innerHTML = jaxify("Correct");
                }
                correct = answer.correct;
                done = true;
            } else if (answer.fuzzy_threshold) {
                var max_length = Math.max(submission.length, answer.answer.length);
                var ratio;
                if (answer.match_case) {
                    ratio = 1- (levenshteinDistance(submission, answer.answer) / max_length);
                } else {
                    ratio = 1- (levenshteinDistance(submission.toLowerCase(),
                                                    answer.answer.toLowerCase()) / max_length);
                }
                if (ratio >= answer.fuzzy_threshold) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify("(Fuzzy) " + answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    done = true;
                }

            }

            if (done) {
                return false;
            } else {
                return true;
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            var qnum = document.getElementById("quizWrap" + id).dataset.qnum;
            var responses = JSON.parse(responsesContainer.dataset.responses);
            responses[qnum] = submission;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        // After correct answer, if next JupyterQuiz question exists and has a text input, scroll by current question height
        if (correct) {
            var wrapper = ths.closest('.Quiz');
            if (wrapper) {
                var nextWrapper = wrapper.nextElementSibling;
                if (nextWrapper && nextWrapper.classList.contains('Quiz')) {
                    var nextInput = nextWrapper.querySelector('input.Input-text');
                    if (nextInput) {
                        var height = wrapper.getBoundingClientRect().height;
                        nextInput.focus();
                    }
                }
            }
        }
        return false;
    }
}

function string_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_string(this, evnt);
    } 
}


function make_string(qa, outerqDiv, qDiv, aDiv, id) {
    outerqDiv.className = "StringQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type your answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    // Apply optional input width (approx. number of characters, in em units)
    if (qa.input_width != null) {
        inp.style['min-width'] = qa.input_width + 'em';
    }
    aDiv.append(inp);

    inp.onkeypress = string_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    });
}
/*
 * Handle asynchrony issues when re-running quizzes in Jupyter notebooks.
 * Ensures show_questions is called after the container div is in the DOM.
 */
function try_show() {
  if (document.getElementById("nQWqLhDtkaKY")) {
    show_questions(questionsnQWqLhDtkaKY, nQWqLhDtkaKY);
  } else {
    setTimeout(try_show, 200);
  }
};
// Invoke immediately
{
  try_show();
}
}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/TF2QOabrPSI?si=x-Naas4iTRvKoX7Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "TauInnov/computers-for-physics",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="3_week.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">שבוע 3 - רשימות וטווחים</p>
      </div>
    </a>
    <a class="right-next"
       href="5_week.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">שבוע 5 - השמות ופונקציות חלק ב</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">שבוע 4 - לולאות</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#for">לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">תחביר</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterable">מעבר על כל איברי iterable (רשימה, מחרוזת וכו’)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">תרגול</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterables">אובייקטים איטרביליים (iterables)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">מהם אובייקטים איטרביליים (iterables)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-range">לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> על <code class="docutils literal notranslate"><span class="pre">range</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">חישוב סכום של טווח מספרים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#range">עוד על <code class="docutils literal notranslate"><span class="pre">range</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">סיכום</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> וכמתים לוגיים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">סיכום לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#while">לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indentation">ההזחה (indentation) קובעת את גוף האיטרציה</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">תרגול</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">לולאות אינסופיות – ראו הוזהרתם!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">דוגמה לשימוש בלולאת while – הטלת קוביה</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">תרגול</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">הנחיות:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-while">סיכום ביניים – לולאות <code class="docutils literal notranslate"><span class="pre">for</span></code> לעומת לולאות <code class="docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">פתרון בעיות באמצעות לולאות</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">זיהוי פולינדרום</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">מציאת הגורם הראשוני המינימלי - תרגול פייתון</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">יעילות האלגוריתם למציאת הגורם הראשוני המינימלי</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">סיכום פתרון בעיות פולינדום ומציאת מספרים ראשוניים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">לולאות מקוננות</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">תרגול</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-while-n">דוגמה מסכמת להבדל במימושים בין <code class="docutils literal notranslate"><span class="pre">for</span></code> ו<code class="docutils literal notranslate"><span class="pre">while</span></code>: עצרת (n!)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">הגדרת עצרת:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">מימוש עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">עצרת עם לולאת <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">עצרת עם <code class="docutils literal notranslate"><span class="pre">for</span></code> ו־פונקציה</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#break-continue"><code class="docutils literal notranslate"><span class="pre">break</span></code> ו <code class="docutils literal notranslate"><span class="pre">continue</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#break">מילת המפתח <code class="docutils literal notranslate"><span class="pre">break</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#break-for">דוגמה: שימוש ב־ <code class="docutils literal notranslate"><span class="pre">break</span></code> בלולאת <code class="docutils literal notranslate"><span class="pre">for</span></code> למציאת המחלק הראשוני הקטן ביותר</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continue">מילת המפתח <code class="docutils literal notranslate"><span class="pre">continue</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">דוגמה ל־ <code class="docutils literal notranslate"><span class="pre">continue</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">מבוא לסיבוכיות</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">כיצד מודדים את כמות הפעולות באלגוריתם?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">סיבוכיות ומדידת זמנים</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">סיכום מדידת זמנים</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">בחנו את עצמכם</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>